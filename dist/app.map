{"version":3,"sources":["../../../../../libs/client/src/store/methods/get.js","../../../../../libs/client/src/store/methods/subscribe.js","../../../../../libs/client/src/store/methods/set.js","../../../../../libs/client/src/store/methods/setItem.js","../../../../../libs/client/src/store/methods/toggle.js","../../../../../libs/client/src/store/methods/notify.js","../../../../../libs/client/src/store/methods/compute.js","../../../../../libs/client/src/store/methods/computeAll.js","../../../../../libs/client/src/store/methods/emit.js","../../../../../libs/client/src/store/methods/registerComponent.js","../../../../../libs/client/src/store/methods/on.js","../../../../../libs/client/src/store/methods/once.js","../../../../../libs/client/src/store/methods/render.js","../../../../../libs/client/src/store/methods/check.js","../../../../../libs/client/src/store/methods/alertOn.js","../../../../../libs/client/src/store/methods/alertOff.js","../../../../../libs/client/src/store/methods/callServerMethod.js","../../../../../libs/client/src/globals.js","../../../../../libs/client/src/store/db/getDataFromServer.js","../../../../../libs/client/src/store/db/syncDataToDB.js","../../../../../libs/client/src/store/db/getDBMetadata.js","../../../../../libs/client/src/store/db/updateDBControl.js","../../../../../libs/client/src/store/db/getModelData.js","../../../../../libs/client/src/store/db/start.js","../../../../../libs/client/src/store/db/hydrate.js","../../../../../libs/client/src/store/db/query.js","../../../../../libs/client/src/store/db/index.js","../../../../../libs/client/src/store/sockets/initSocket.js","../../../../../libs/client/src/store/sockets/onMessage.js","../../../../../libs/client/src/store/sockets/index.js","../../../../../../../../.npm-packages/lib/node_modules/parcel-bundler/node_modules/process/browser.js","../../../../../libs/client/src/store/lifecycle/connectStoreToServer.js","../../../../../libs/client/src/store/methods/startApp.js","../../../../../libs/client/src/store/methods/index.js","../../../../../libs/client/src/store/queue/addToQueue.js","../../../../../libs/client/src/store/queue/createProcesses.js","../../../../../libs/client/src/store/queue/processOptimistic.js","../../../../../libs/client/src/store/queue/processStep.js","../../../../../libs/client/src/store/queue/processor.js","../../../../../libs/client/src/store/queue/runTask.js","../../../../../libs/client/src/store/queue/index.js","../../../../../libs/client/src/store/lifecycle/createStore.js","../../../../../libs/client/src/store/index.js","../../../../../libs/client/src/ui/styles/registerStyles.js","../../../../../libs/client/node_modules/stylis/stylis.js","../../../../../libs/client/src/ui/styles/processStyle.js","../../../../../libs/client/src/ui/styles/getClasses.js","../../../../../libs/client/src/ui/styles/getStyles.js","../../../../../libs/client/src/ui/styles/index.js","../../../../../libs/client/src/ui/hoc/custom/getFinalProps.js","../../../../../libs/client/src/ui/hoc/custom/getStore.js","../../../../../libs/client/src/ui/hoc/custom/create.js","../../../../../libs/client/src/ui/hoc/createHoc.js","../src/lib/directive.ts","../src/lib/dom.ts","../src/lib/part.ts","../src/lib/template.ts","../src/lib/template-instance.ts","../src/lib/template-result.ts","../src/lib/parts.ts","../src/lib/default-template-processor.ts","../src/lib/template-factory.ts","../src/lib/render.ts","src/lit-html.ts","../src/directives/guard.ts","../src/directives/repeat.ts","../src/directives/unsafe-html.ts","../../../../../libs/client/src/ui/index.js","../../../../../libs/client/src/createClient.js","../../../../../libs/client/src/index.js","store/actions/changeRoute.js","store/actions/index.js","store/index.js","ui/components/Input.js","ui/components/index.js","ui/fragments/Menu.js","ui/fragments/index.js","ui/pages/<App>/App.js","ui/pages/<Dashboard>/<Settings>/Settings.js","ui/pages/<Dashboard>/<Help>/Help.js","ui/pages/<Dashboard>/<Legal>/Legal.js","ui/pages/<Dashboard>/<Profile>/Profile.js","ui/pages/<Dashboard>/Dashboard.js","ui/Root.js","../config.js","app.js"],"names":["get","Store","registerNumber","field","methods","subscribe","objects","observables","observable","findListener","listeners","find","item","console","log","currentListeners","components","isSubscribed","push","isPlainValue","v","includes","wasChanged","v1","v2","set","object","Object","keys","forEach","key","previousValue","previousValueClone","Array","isArray","nextValue","warn","shouldNotify","notify","setItem","findIndex","x","id","toggle","cb","currentValue","computed","take","compute","flags","IS_MOUNTED","render","calc","values","map","computeAll","emit","eventStr","cbProps","reactions","filter","keepAlive","done","reaction","callback","currentRegisterNumber","registerComponent","componentDef","definition","instances","on","once","renderer","Comp","props","node","defaultComponent","isString","parentNode","document","getElementById","Component","check","checks","name","str","result","message","alertOn","alerts","obj","rand1000","Math","floor","random","timestamp","Date","now","_id","isVisible","timeout","setTimeout","alertOff","findAlert","callServerMethod","siteUrl","method","args","Promise","resolve","reject","xhr","window","XMLHttpRequest","open","setRequestHeader","onreadystatechange","readyState","DONE","statusCode","status","responseReturned","responseText","JSON","parse","payloadString","stringify","send","SYSTEM_DB_USER_ID","WINDOW_APP_DATA","GET_MODEL_DATA_METHOD","getDataFromServer","instance","user_id","lastTimestamp","localEntitiesIds","requestArgs","globals","then","items","newTimestamp","catch","syncDataToDB","counter","length","modelStore","transaction","objectStore","requestPrevRecords","getAll","onsuccess","previousRecords","attrs","findRecord","rec","putRequest","put","domain","getDBMetadata","controlStore","requestControlRecords","controlRecords","requestModelKeys","getAllKeys","onerror","updateDBControl","getModelData","requestRecords","start","version","indexedDB","mozIndexedDB","webkitIndexedDB","msIndexedDB","request","error","onupgradeneeded","e","target","model","createObjectStore","keyPath","control","getCurrentAttrs","reduce","acum","value","dbValue","hydrate","data","db","query","initSocket","socketUrl","onMessage","undefined","wsSupport","ws","WebSocket","sendJSON","onopen","isInitial","onclose","onmessage","payload","findEntity","process","module","exports","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","Error","defaultClearTimeout","clearTimeout","runTimeout","fun","call","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","concat","drainQueue","len","run","nextTick","arguments","i","Item","array","prototype","apply","title","browser","env","argv","versions","noop","addListener","off","removeListener","removeAllListeners","prependListener","prependOnceListener","binding","cwd","chdir","dir","umask","isBrowser","connectStoreToServer","sockets","startApp","appData","rootComponent","currentPage","baseUrl","baseFolder","httpPort","socketPort","isProduction","useServiceWorker","navigator","serviceWorker","register","scope","registration","user","addToQueue","steps","onError","objToQueue","splice","runTask","createProcesses","actions","processes","singleAction","processOptimistic","isOK","entity","processStep","step","previousArgs","sideEffect","optimistic","resolveOptimistic","response","err","processor","promises","proceed","p","fn","res","task","createStore","utils","hoc","registerStyles","styledRules","alreadyRegistered","innerHTML","indexOf","processStyle","rules","out","substr","getClasses","componentDefClasses","classKeys","mapping","newClassName","getStyles","componentStyles","styleKeys","isFunction","getFinalProps","client","store","classesMapping","processedStyles","state","classes","sections","styles","getStore","measure","processedClasses","solveProps","renderComponent","children","finalProps","rendered","createHoc","html","htmlFn","guard","repeat","unsafeHTML","createClient","lib","fragments","ui","init","_client","onload","page","action","history","replaceState","pushState","back","language","Input","input","onKeyDown","keyCode","preventDefault","onClickRight","type","placeholder","onInput","Menu","size","position","level","onClick","wrapper","line","handle","topLine","bottomLine","app","submenu","toLowerCase","Settings","require","default","Help","Legal","Profile","submenus","dash","screen","menu","pages","App","Dashboard","development","useManifest","production","jmaguirrei","config"],"mappings":"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B,CAAb;AACA,MAAMiO,iBAAiB,GAAGtO,IAAI,CAACuO,SAAL,CAAeC,OAAf,aAA4BjT,cAA5B,KAAgD,CAAC,CAA3E;AACA,MAAI,CAAC+S,iBAAL,EAAwBtO,IAAI,CAACuO,SAAL,IAAkBF,WAAlB;AAEzB;;;ACXD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA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,SAAS,CAAC,MAAV,GAAmB,CAAjC,CApCmC,CAsCnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,WAAO,OAAO,IAAI,OAAX,IAAsB,OAAO,IAAI,OAAxC,EAAiD;AAC/C,UAAI,QAAQ,CAAC,OAAD,CAAR,KAAsB,IAA1B,EAAgC;AAC9B;AACA,QAAA,OAAO;AACR,OAHD,MAGO,IAAI,QAAQ,CAAC,OAAD,CAAR,KAAsB,IAA1B,EAAgC;AACrC;AACA,QAAA,OAAO;AACR,OAHM,MAGA,IAAI,OAAO,CAAC,OAAD,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","file":"app.map","sourceRoot":"../src/client","sourcesContent":["\r\rexport function get(Store) {\r\r  return registerNumber => field => {\r    Store.methods.subscribe(registerNumber, field);\r    return Store.objects.observables[field];\r  };\r\r}\r\r\r","\rexport function subscribe(Store) {\r\r  return (registerNumber, observable) => {\r    const findListener = Store.objects.listeners.find(item => item.observable === observable);\r    if (!findListener) return console.log(`Listener not found on observable ${observable}`);\r    const currentListeners = findListener.components;\r    const isSubscribed = currentListeners.find(item => item.registerNumber === registerNumber);\r    if (!isSubscribed) currentListeners.push({ registerNumber });\r  };\r\r}\r\r\r","\r\rconst isPlainValue = v => ([ 'string', 'number', 'boolean' ].includes(typeof v));\rconst wasChanged = (v1, v2) => (v1 !== v2);\r\rexport function set(Store) {\r\r  return object => {\r\r    if (!object) return;\r\r    Object.keys(object).forEach(key => {\r\r      const previousValue = Store.objects.observables[key];\r      const previousValueClone = Array.isArray(previousValue)\r        ? [ ...previousValue ]\r        : typeof previousValue === 'object'\r          ? { ...previousValue }\r          : previousValue;\r\r      const nextValue = typeof object[key] === 'function'\r        ? object[key](previousValueClone)\r        : object[key];\r\r      if (typeof previousValue !== typeof nextValue) {\r        console.warn(`Type does not match previous type in ${key}`);\r      } else {\r        const shouldNotify = !isPlainValue(nextValue) ||\r          (isPlainValue(nextValue) && wasChanged(previousValue, nextValue));\r        if (shouldNotify) {\r          Store.objects.observables[key] = nextValue;\r          Store.methods.notify(key);\r        }\r      }\r\r    });\r  };\r\r}\r\r","\r\r\rexport function setItem(Store) {\r\r  return (observable, item) => {\r    const findIndex = Store.objects.observables[observable].findIndex(x => x.id === item.id);\r    Store.objects.observables[observable][findIndex] = item;\r    Store.methods.notify(observable);\r  };\r\r}\r\r","\r\rexport function toggle(Store) {\r\r  return (observable, cb) => {\r    const currentValue = Store.objects.observables[observable];\r    if (typeof currentValue === 'undefined') {\r      console.warn(`Observable [${observable}] does not exists.`);\r    } else if (typeof currentValue !== 'boolean') {\r      console.warn(`Observable [${observable}] is not a boolean.`);\r    } else {\r      Store.methods.set({ [observable]: !currentValue });\r      if (cb) cb(!currentValue);\r    }\r  };\r\r}\r\r\r","\r\rexport function notify(Store) {\r\r  return observable => {\r\r    // Notify computed\r    if (observable) {\r      Object.keys(Store.objects.computed).forEach(key => {\r        const { take } = Store.objects.computed[key];\r        if (take.includes(observable)) Store.methods.compute(key);\r      });\r    }\r\r    // Notify components\r    if (Store.flags.IS_MOUNTED) Store.methods.render();\r    // const findListener = Store.objects.listeners.find(item => item.observable === observable);\r    // if (findListener && findListener.components) {\r    //   findListener.components.forEach(item => {\r    //     const { registerNumber } = item;\r    //     const componentDefinition = Store.objects.components[registerNumber];\r    //     componentDefinition.definition._render();\r    //   });\r    // }\r\r  };\r\r}\r\r","\r\rexport function compute(Store) {\r\r  return key => {\r    const { take, calc } = Store.objects.computed[key];\r    const values = take.map(field => Store.objects.observables[field]);\r    Store.objects.observables[key] = calc(...values);\r  };\r\r}\r\r","\r\rexport function computeAll(Store) {\r\r  return () => {\r    Object.keys(Store.objects.computed).forEach(key => {\r      Store.methods.compute(key);\r    });\r  };\r\r}\r\r","\r\rexport function emit(Store) {\r\r  return (eventStr, cbProps) => {\r\r    if (eventStr === 'MOUNTED') Store.flags.IS_MOUNTED = true;\r\r    const reactions = Store.objects.reactions.filter(item => {\r      if (item.keepAlive) return item.eventStr === eventStr;\r      return item.eventStr === eventStr && !item.done;\r    });\r\r    reactions.forEach(reaction => {\r      reaction.done = true;\r      reaction.callback(cbProps);\r    });\r  };\r\r}\r\r","\rlet currentRegisterNumber = 1000;\r\rexport function registerComponent(Store) {\r\r  return componentDef => {\r    // if (componentDef.id) return componentDef.id;\r    currentRegisterNumber++;\r    Store.objects.components[currentRegisterNumber] = {\r      definition: componentDef,\r      instances: {},\r    };\r    return currentRegisterNumber;\r  };\r\r\r}\r\r\r","\r\rexport function on(Store) {\r\r  return (eventStr, callback) => {\r    Store.objects.reactions.push({ eventStr, callback, keepAlive: true });\r  };\r\r}\r\r","\r\rexport function once(Store) {\r\r  return (eventStr, callback) => {\r    Store.objects.reactions.push({ eventStr, callback, done: false });\r  };\r\r}\r\r","\r\rexport function render(Store, renderer) {\r\r  return (Comp, props = {}, node = 'root') => {\r\r    // console.log(\"render ------------------------------->\", Comp, props, node);\r\r    if (!Store.objects.defaultComponent) Store.objects.defaultComponent = () => Comp(props);\r    const isString = typeof node === 'string';\r    const parentNode = isString ? document.getElementById(node) : node;\r    const Component = Comp || Store.objects.defaultComponent;\r    renderer(Component(props), parentNode);\r\r  };\r\r}\r\r","\rexport function check(Store, checks) {\r\r  return (name, str) => {\r\r    const { result, message } = checks[name](str);\r    return { result, message };\r\r  };\r\r}\r","\r\rexport function alertOn(Store, alerts) {\r\r  return (obj = {}) => {\r\r    const rand1000 = Math.floor(1000 * Math.random());\r    const timestamp = Date.now();\r    const _id = `${timestamp}--${rand1000}`;\r\r    const message = obj.name ? alerts[obj.name] : obj.name;\r\r    Store.objects.alerts.push({\r      _id,\r      ...obj,\r      message,\r      timestamp,\r      isVisible: true,\r    });\r\r    // Maybe later we are going to notify only the exact component using alerts\r    Store.methods.notify(null);\r\r    if (obj.timeout) {\r      setTimeout(() => {\r        Store.methods.alertOff({ _id });\r      }, obj.timeout);\r    }\r\r  };\r\r}\r","\rexport function alertOff(Store) {\r\r  return ({ _id }) => {\r    const findAlert = Store.objects.alerts.find(item => item._id === _id);\r\r    if (findAlert) {\r      findAlert.isVisible = false;\r      // Maybe later we are going to notify only the exact component using alerts\r      Store.methods.notify(null);\r    }\r\r  };\r\r}\r","\r\rexport function callServerMethod(siteUrl) {\r\r  return (method, args = {}) => {\r\r    // For each query string parameter sent, add it to the path\r    // const requestUrl = Object.keys(queryStringObject).reduce((acum, key, index) => {\r    //   const queryStr = `${key}=${queryStringObject[key]}`;\r    //   if (index === 0) return `${acum}?${queryStr}`;\r    //   return `${acum}&${queryStr}`;\r    // }, `${baseUrl}/${path}`);\r\r    return new Promise((resolve, reject) => {\r\r      // Form the http request as a JSON type\r      const xhr = new window.XMLHttpRequest();\r      xhr.open('POST', `${siteUrl}/api/methods`, true);\r      xhr.setRequestHeader('Content-type', 'application/json');\r\r      // For each header sent, add it to the request\r      // Object.keys(headers).forEach(key => {\r      //   xhr.setRequestHeader(key, headers[key]);\r      // });\r\r      // When the request comes back, handle the response\r      xhr.onreadystatechange = () => {\r        if (xhr.readyState === window.XMLHttpRequest.DONE) {\r\r          const statusCode = xhr.status;\r          if (![ 200, 201 ].includes(statusCode)) reject('XHR request failed');\r\r          const responseReturned = xhr.responseText;\r          resolve(JSON.parse(responseReturned));\r\r        }\r      };\r\r      // Send the payload as JSON\r      const payloadString = JSON.stringify({ method, args });\r      xhr.send(payloadString);\r\r    });\r\r  };\r\r}\r\r","\nexport default {\n\n  SYSTEM_DB_USER_ID: '0000000-system-000000',\n  WINDOW_APP_DATA: '__appData__',\n  GET_MODEL_DATA_METHOD: '@server-model.getData',\n\n};\n\n","import globals from '../../globals';\r\rexport function getDataFromServer(Store) {\r\r  return args => {\r\r    const {\r      instance = null,\r      user_id,\r      lastTimestamp = 0,\r      localEntitiesIds = [],\r    } = args;\r\r    const requestArgs = {\r      user_id,\r      lastTimestamp,\r      localEntitiesIds,\r    };\r\r    return new Promise((resolve, reject) => {\r\r      // Special method available ony for internal libs\r      Store.methods.callServerMethod(globals.GET_MODEL_DATA_METHOD, requestArgs)\r      .then(items => {\r        if (!items) reject('Could not get data from server');\r        const newTimestamp = Date.now();\r        resolve({ instance, items, newTimestamp });\r      })\r      .catch(reject);\r\r    });\r\r  };\r\r}\r","\r\rexport function syncDataToDB({ instance, items, newTimestamp }) {\r\r  let counter = 0;\r  return new Promise(resolve => {\r\r    if (items.length === 0) resolve({ instance, counter, newTimestamp });\r\r    const modelStore = instance.transaction([ 'model' ], 'readwrite').objectStore('model');\r    const requestPrevRecords = modelStore.getAll();\r\r    requestPrevRecords.onsuccess = () => {\r      const previousRecords = requestPrevRecords.result;\r\r      items.forEach(item => {\r\r        if (item.attrs.length > 0) {\r          const findRecord = previousRecords.find(rec => rec._id === item._id);\r          const putRequest = modelStore.put({\r            _id: item._id,\r            domain: item.domain,\r            attrs: findRecord ? [\r              ...findRecord.attrs,\r              ...item.attrs,\r            ] : item.attrs,\r          });\r\r          putRequest.onsuccess = () => {\r            counter++;\r            if (counter === items.length) resolve({ instance, counter, newTimestamp });\r          };\r        }\r\r      });\r    };\r\r  });\r\r\r}\r\r","\rexport function getDBMetadata({ instance, user_id }) {\r\r  return new Promise((resolve, reject) => {\r\r    const controlStore = instance.transaction('control').objectStore('control');\r    const requestControlRecords = controlStore.getAll();\r\r\r    requestControlRecords.onsuccess = () => {\r      const controlRecords = requestControlRecords.result || [];\r      const lastTimestamp = controlRecords.length > 0\r        ? controlRecords[controlRecords.length - 1].lastTimestamp\r        : 0;\r\r      const modelStore = instance.transaction('model').objectStore('model');\r      const requestModelKeys = modelStore.getAllKeys();\r\r      requestModelKeys.onsuccess = () => {\r        const localEntitiesIds = requestModelKeys.result || [];\r        resolve({\r          instance,\r          user_id,\r          lastTimestamp,\r          localEntitiesIds,\r        });\r      };\r\r      requestModelKeys.onerror = () => reject('Error getting Model Keys');\r\r    };\r\r    requestControlRecords.onerror = () => reject('Error getting Control Records');\r\r  });\r\r\r}\r\r","\r\rexport function updateDBControl({ instance, counter, newTimestamp }) {\r\r  return new Promise(resolve => {\r\r    const controlStore = instance.transaction([ 'control' ], 'readwrite').objectStore('control');\r\r    const putRequest = controlStore.put({\r      _id: newTimestamp,\r      lastTimestamp: newTimestamp,\r      counter,\r    });\r\r    putRequest.onsuccess = () => {\r      resolve({ instance });\r    };\r\r\r  });\r\r\r}\r\r","\r\rexport function getModelData({ instance }) {\r\r  return new Promise(resolve => {\r\r    const modelStore = instance.transaction('model').objectStore('model');\r    const requestRecords = modelStore.getAll();\r\r    requestRecords.onsuccess = () => {\r      return resolve(requestRecords.result);\r    };\r\r  });\r\r\r}\r\r","\rimport { getDataFromServer } from './getDataFromServer';\rimport { syncDataToDB } from './syncDataToDB';\rimport { getDBMetadata } from './getDBMetadata';\rimport { updateDBControl } from './updateDBControl';\rimport { getModelData } from './getModelData';\r\rexport function start(Store, { name, version, user_id }) {\r\r  const indexedDB = window.indexedDB ||\r    window.mozIndexedDB ||\r    window.webkitIndexedDB ||\r    window.msIndexedDB;\r\r  // No indexedDB, we just request all data always\r  if (!indexedDB) {\r    return new Promise((resolve, reject) => {\r      getDataFromServer({ user_id })\r      .then(({ items }) => resolve(items))\r      .catch(reject);\r    });\r  }\r\r  return new Promise((resolve, reject) => {\r\r    const request = indexedDB.open(name, version);\r    request.onsuccess = () => resolve({ instance: request.result, user_id });\r    request.onerror = () => reject(request.error);\r\r    request.onupgradeneeded = e => {\r      const instance = e.target.result;\r      instance.model = instance.createObjectStore('model', { keyPath: '_id' });\r      instance.control = instance.createObjectStore('control', { keyPath: '_id' });\r    };\r\r  })\r  .then(getDBMetadata)\r  .then(getDataFromServer(Store))\r  .then(syncDataToDB)\r  .then(updateDBControl)\r  .then(getModelData)\r  .catch(console.log);\r\r}\r\r","\r\rfunction getCurrentAttrs(attrs) {\r  return attrs.reduce((acum, item) => {\r    const { key, value, timestamp } = item;\r    /*\r      value:\r        is always what is displayed at the UI, used in calculations, etc.\r        can be in 2 status\r\r      status:\r        0: value is \"optimistic\" and has not been validated yet by the server\r        1: value coherent with the server initial load,\r        2: optimistic value that was confirmed by the server\r        3: value that came from the server through web-sockets\r\r      dbValue:\r        is the last value that was confirmed by the server\r        if null indicates that the whole record is not confirmed yet\r\r      timestamp:\r        is the timestamp that reflects the last status coming from the server\r\r    */\r    if (!acum[key]) acum[key] = { value, dbValue: value, status: 1, timestamp };\r    return {\r      ...acum,\r      [key]: timestamp > acum[key].timestamp\r        ? { value, dbValue: value, status: 1, timestamp }\r        : acum[key],\r    };\r  }, {});\r}\r\rexport function hydrate(Store) {\r\r  return data => {\r\r    if (data.length > 0) {\r\r      Store.db.data = data.reduce((acum, item) => {\r        const { _id, domain, attrs } = item;\r        if (!acum[domain]) acum[domain] = [];\r\r        return {\r          ...acum,\r          [domain]: [\r            ...acum[domain],\r            {\r              _id,\r              attrs: getCurrentAttrs(attrs),\r            },\r          ],\r        };\r\r      }, {});\r\r      // Renders the defaultComponent (Container)\r      if (Store.flags.IS_MOUNTED) Store.methods.render();\r\r    }\r\r  };\r\r}\r\r\r","\rexport function query(Store) {\r\r  return domain => {\r    if (!Store.db.data) return [];\r    return Store.db.data[domain] || [];\r  };\r\r}\r\r\r","\rexport { start } from './start';\rexport { hydrate } from './hydrate';\rexport { query } from './query';\r","\n\nexport function initSocket({ socketUrl, user_id, onMessage }) {\n\n  if (!socketUrl) {\n    console.log('SocketUrl not defined');\n    return () => undefined;\n  }\n\n  const wsSupport = 'WebSocket' in window;\n  if (!wsSupport) {\n    console.log('WebSocket not supported');\n    return () => undefined;\n  }\n\n  const ws = new window.WebSocket(socketUrl);\n\n  const sendJSON = obj => ws.send(JSON.stringify(obj));\n\n  ws.onopen = () => {\n    console.log('WebSocket opened');\n    // tell the server user_id is connected\n    if (user_id) sendJSON({ user_id, isInitial: true });\n  };\n\n  ws.onclose = x => console.log('WebSocket closed', x);\n  ws.onmessage = obj => {\n    onMessage(JSON.parse(obj.data));\n  };\n\n\n  return sendJSON;\n\n}\n\n","\n\nexport function onMessage(Store) {\n\n  return payload => {\n    const { data, isInitial } = payload;\n    if (isInitial) console.log('Socket first message --> ', payload);\n\n    if (data) {\n      const { _id, domain, attrs } = data;\n      if (!Store.db.data[domain]) Store.db.data[domain] = [];\n      const findEntity = Store.db.data[domain].find(item => item._id === _id);\n\n      if (!findEntity) {\n\n        // Create entity\n        Store.db.data[domain].push({\n          _id,\n          attrs: attrs.reduce((acum, item) => {\n            const { key, value, timestamp } = item;\n            return {\n              ...acum,\n              [key]: {\n                value,\n                dbValue: value,\n                status: 3,\n                timestamp,\n              },\n            };\n          }, {}),\n        });\n\n      } else {\n\n        // Update entity\n        attrs.forEach(item => {\n          const { key, value, timestamp } = item;\n          findEntity.attrs[key] = {\n            value,\n            dbValue: value,\n            status: 3,\n            timestamp,\n          };\n        });\n\n      }\n\n      Store.methods.render();\n\n    }\n  };\n\n}\n\n","\rexport { initSocket } from './initSocket';\rexport { onMessage } from './onMessage';\r","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","\rimport * as db from '../db';\rimport * as sockets from '../sockets';\rimport { callServerMethod } from '../methods';\r\rconst isBrowser = process.browser;\r\rexport function connectStoreToServer(Store, { user_id, siteUrl, socketUrl }) {\r\r  /* ----------------------------------------------------------------------------------------------\r    Initialize db && sockets\r  ---------------------------------------------------------------------------------------------- */\r\r  Store.methods.callServerMethod = callServerMethod(siteUrl);\r\r  if (isBrowser) {\r\r  /* ----------------------------------------------------------------------------------------------\r    Initialize sockets\r  ---------------------------------------------------------------------------------------------- */\r\r    const sendJSON = sockets.initSocket({\r      socketUrl,\r      user_id,\r      onMessage: sockets.onMessage(Store),\r    });\r\r    Store.sockets = {\r      sendJSON,\r    };\r\r  /* ----------------------------------------------------------------------------------------------\r    Initialize db\r  ---------------------------------------------------------------------------------------------- */\r\r    Store.db = {\r      data: null, // already transformed and living free after initialization\r      query: db.query(Store),\r    };\r\r    return db.start(Store, { name: 'asyncDB', version: 1, user_id })\r    .then(db.hydrate(Store))\r    .catch(console.log);\r\r  }\r\r}\r\r","\rimport { connectStoreToServer } from '../lifecycle/connectStoreToServer';\r\rexport function startApp(Store) {\r\r  return ({ appData, rootComponent }) => {\r\r    const {\r      currentPage,\r      query,\r      baseUrl,\r      baseFolder,\r      httpPort,\r      socketPort,\r      isProduction,\r      useServiceWorker,\r    } = appData;\r\r    const siteUrl = isProduction\r      ? `https://${baseUrl}/${baseFolder}`\r      : `http://${baseUrl}:${httpPort}`;\r\r    const socketUrl = !socketPort ? null : isProduction\r      ? `wss://${baseUrl}/${baseFolder}`\r      : `ws://${baseUrl}:${socketPort}`;\r\r/* ------------------------------------------------------------------------------------------------\r  Register Service Worker\r------------------------------------------------------------------------------------------------ */\r\r    if (useServiceWorker && 'serviceWorker' in window.navigator) {\r\r      window.navigator.serviceWorker\r      .register('../sw.js', { scope: '/' })\r      // .register(`./${baseFolder}/sw.js`, { scope: '/' })\r      .then(registration => {\r        console.log('Service Worker registration OK', registration);\r      })\r      .catch(error => {\r        console.log('Service Worker registration FAILED', error);\r      });\r\r\r    }\r\r\r/* ------------------------------------------------------------------------------------------------\r  First Render && Connect to Server data\r------------------------------------------------------------------------------------------------ */\r\r    if (currentPage) Store.methods.set({ currentPage });\r    if (query.user) Store.methods.set({ user_id: query.user });\r\r\r    connectStoreToServer(Store, { user_id: query.user, siteUrl, socketUrl })\r    .then(() => {\r      Store.methods.render(rootComponent, { currentPage }, 'root');\r      Store.methods.emit('MOUNTED');\r    });\r\r\r  };\r\r}\r","\rexport { get } from './get';\rexport { subscribe } from './subscribe';\rexport { set } from './set';\rexport { setItem } from './setItem';\rexport { toggle } from './toggle';\rexport { notify } from './notify';\rexport { compute } from './compute';\rexport { computeAll } from './computeAll';\rexport { emit } from './emit';\rexport { registerComponent } from './registerComponent';\rexport { on } from './on';\rexport { once } from './once';\rexport { render } from './render';\rexport { check } from './check';\rexport { alertOn } from './alertOn';\rexport { alertOff } from './alertOff';\rexport { callServerMethod } from './callServerMethod';\rexport { startApp } from './startApp';\r\r","\r\rexport function addToQueue(Store) {\r\r  return ({ name, steps, onError }) => {\r    const _id = Date.now();\r    const objToQueue = {\r      _id,\r      name,\r      steps,\r      done: false,\r    };\r\r    if (onError) objToQueue.onError = onError;\r    Store.process.queue.splice(0, 0, objToQueue); // ads into the first element\r    Store.process.runTask({ _id });\r\r  };\r\r}\r\r","\r\r\rexport function createProcesses(Store, actions) {\r\r  if (!actions) return () => undefined;\r\r  const processes = Object.keys(actions).reduce((acum, key) => {\r    const singleAction = actions[key];\r    /*\r      We dont want to pass the whole Store to the action, just observables\r      So, the actions consumes the Store like:\r      const { language } = Store.observables;\r    */\r    const { observables } = Store.objects;\r    return {\r      ...acum,\r      [key]: args => {\r        Store.process.addToQueue({\r          name: key,\r          ...singleAction({ observables })(args),\r        });\r      },\r    };\r  }, {});\r\r  return (name, args) => processes[name](args);\r\r\r}\r\r\r","\n\nexport function processOptimistic(Store, args) {\n\n  const { _id, domain, attrs } = args;\n\n  if (!Store.db.data[domain]) Store.db.data[domain] = [];\n  const findEntity = Store.db.data[domain].find(item => item._id === _id);\n\n  /*\n    Case 1: New Entity\n  */\n\n  if (!findEntity) {\n\n    // Create entity\n    Store.db.data[domain].push({\n      _id,\n      attrs: Object.keys(attrs).reduce((acum, key) => {\n        return {\n          ...acum,\n          [key]: {\n            value: attrs[key],\n            dbValue: null,\n            status: 0,\n            timestamp: Date.now(),\n          },\n        };\n      }, {}),\n    });\n\n  } else {\n\n  /*\n    Case 2: Existing entity, new attrs\n  */\n\n    // Update entity\n    Object.keys(attrs).forEach(key => {\n      const dbValue = attrs[key].value;\n      findEntity.attrs[key] = {\n        value: attrs[key],\n        dbValue,\n        status: 0,\n        timestamp: Date.now(),\n      };\n    });\n\n  }\n\n\n  Store.methods.render();\n\n  return isOK => {\n\n    if (!findEntity && !isOK) {\n      // New Entity + error => Remove the entity\n      Store.db.data[domain] = Store.db.data[domain].filter(item => item._id !== _id);\n\n    } else {\n      // New Entity + ok || Existing entity => Update fields\n\n      const entity = Store.db.data[domain].find(item => item._id === _id);\n\n      Object.keys(entity.attrs).forEach(key => {\n        const field = entity.attrs[key];\n        if (field.status === 0) {\n          field.status = isOK ? 2 : 1;\n          if (!isOK) field.value = field.dbValue;\n          if (isOK) field.dbValue = field.value;\n          field.timestamp = Date.now();\n        }\n      });\n\n    }\n\n    if (!isOK) Store.methods.render();\n\n  };\n\n}\n\n","\nimport { processOptimistic } from './processOptimistic';\n\nexport function processStep(Store, step, previousArgs = {}) {\n\n  const {\n    method,\n    domain,\n    args,\n    sideEffect,\n    optimistic = true,\n  } = step(previousArgs);\n\n  // Backend may return something valuable for the next step\n  if (domain === '_Backend_') {\n\n    const resolveOptimistic = optimistic\n      ? processOptimistic(Store, args)\n      : () => undefined;\n\n    return new Promise((resolve, reject) => {\n      return Store.methods.callServerMethod(method, args)\n        .then(response => {\n          const error = response.error;\n          const data = response.data;\n          resolveOptimistic(!error);\n          resolve({\n            error,\n            data: {\n              ...previousArgs.data,\n              ...data,\n            },\n          });\n        })\n        .catch(err => {\n          resolveOptimistic(false);\n          reject(err);\n        });\n    });\n  }\n\n  // Store works like simple local State\n  if (domain === '_Store_') {\n    Store.methods[method](args);\n    if (sideEffect) sideEffect();\n    return Promise.resolve(previousArgs);\n  }\n\n}\n\n","\n// import { resolveArgs } from './resolveArgs';\nimport { processStep } from './processStep';\n\nexport function processor(Store) {\n\n  return steps => {\n\n    // Promise build\n    const promises = steps.map(step => {\n\n      return previousArgs => {\n        // const args = resolveArgs(step.args, prevArgs);\n        // processStep(Store, step, args);\n        return processStep(Store, step, previousArgs);\n      };\n\n    });\n\n    // Promise execution\n    let proceed = true;\n\n    promises.reduce((p, fn) => {\n      return p\n        .then(res => {\n          if (proceed) return fn(res);\n        })\n        .catch(e => {\n          console.log('Error in Promise chain execution', e);\n          proceed = false;\n        });\n    }, Promise.resolve({}));\n\n  };\n\n}\n","\rexport function runTask(Store) {\r\r  return ({ _id }) => {\r    const task = Store.process.queue.find(item => item._id === _id);\r    Store.process.processor(task.steps);\r    task.done = true;\r\r  };\r\r}\r\r","\rexport { addToQueue } from './addToQueue';\rexport { createProcesses } from './createProcesses';\rexport { processor } from './processor';\rexport { runTask } from './runTask';\r\r","\rimport * as methods from '../methods';\rimport * as queue from '../queue';\r\rexport function createStore(definition, renderer) {\r\r  const Store = {};\r\r  const {\r    observables = {},\r    computed = {},\r    actions = {},\r    alerts = {},\r    checks = {},\r  } = definition;\r\r  /* ----------------------------------------------------------------------------------------------\r    Initialize flags\r  ---------------------------------------------------------------------------------------------- */\r  Store.flags = {\r    IS_MOUNTED: false,\r  };\r\r  /* ----------------------------------------------------------------------------------------------\r    Initialize utils to the store for convenience.\r  ---------------------------------------------------------------------------------------------- */\r  Store.utils = {\r    hoc: null, // will be attached after ui initialization\r  };\r\r  /* ----------------------------------------------------------------------------------------------\r    Initialize observables\r  ---------------------------------------------------------------------------------------------- */\r  Store.objects = {\r    defaultComponent: null,\r    observables,\r    computed,\r    listeners: [],\r    reactions: [],\r    components: {},\r    alerts: [],\r  };\r\r  /* ----------------------------------------------------------------------------------------------\r    Initialize methods\r  ---------------------------------------------------------------------------------------------- */\r  Store.methods = {\r    check: methods.check(Store, checks),\r    get: methods.get(Store),\r    subscribe: methods.subscribe(Store),\r    set: methods.set(Store),\r    setItem: methods.setItem(Store),\r    toggle: methods.toggle(Store),\r    notify: methods.notify(Store),\r    emit: methods.emit(Store),\r    on: methods.on(Store),\r    once: methods.once(Store),\r    render: methods.render(Store, renderer),\r    compute: methods.compute(Store),\r    computeAll: methods.computeAll(Store),\r    registerComponent: methods.registerComponent(Store),\r    alertOn: methods.alertOn(Store, alerts),\r    alertOff: methods.alertOff(Store),\r    callServerMethod: () => undefined, // will be initialized on 'connectStoreToServer'\r    startApp: methods.startApp(Store),\r  };\r\r  /* ----------------------------------------------------------------------------------------------\r    Initialize queued processes\r  ---------------------------------------------------------------------------------------------- */\r  Store.process = {\r    queue: [],\r    addToQueue: queue.addToQueue(Store),\r    processor: queue.processor(Store),\r    runTask: queue.runTask(Store),\r    call: queue.createProcesses(Store, actions), // client side method call\r  };\r\r  /* ----------------------------------------------------------------------------------------------\r    Initialize listeners\r  ---------------------------------------------------------------------------------------------- */\r  Object.keys(Store.objects.observables).forEach(observable => {\r    Store.objects.listeners.push({ observable, components: [] });\r  });\r\r  /* ----------------------------------------------------------------------------------------------\r    Start with computed values up to date\r  ---------------------------------------------------------------------------------------------- */\r  Store.methods.computeAll();\r\r\r  return Store;\r\r}\r\r","\rimport { createStore } from './lifecycle/createStore';\r\rexport default createStore;\r","\r\r\rexport function registerStyles(registerNumber, styledRules) {\r\r  if (!styledRules) return;\r\r  const node = document.getElementById('component-styles');\r  const alreadyRegistered = node.innerHTML.indexOf(`--${registerNumber}`) > -1;\r  if (!alreadyRegistered) node.innerHTML += styledRules;\r\r}\r\r\r","/*\n *          __        ___\n *    _____/ /___  __/ (_)____\n *   / ___/ __/ / / / / / ___/\n *  (__  ) /_/ /_/ / / (__  )\n * /____/\\__/\\__, /_/_/____/\n *          /____/\n *\n * light - weight css preprocessor @licence MIT\n */\n(function (factory) {/* eslint-disable */\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? (module['exports'] = factory(null)) :\n\t\ttypeof define === 'function' && define['amd'] ? define(factory(null)) :\n\t\t\t(window['stylis'] = factory(null))\n}(/** @param {*=} options */function factory (options) {/* eslint-disable */\n\n\t'use strict'\n\n\t/**\n\t * Notes\n\t *\n\t * The ['<method name>'] pattern is used to support closure compiler\n\t * the jsdoc signatures are also used to the same effect\n\t *\n\t * ----\n\t *\n\t * int + int + int === n4 [faster]\n\t *\n\t * vs\n\t *\n\t * int === n1 && int === n2 && int === n3\n\t *\n\t * ----\n\t *\n\t * switch (int) { case ints...} [faster]\n\t *\n\t * vs\n\t *\n\t * if (int == 1 && int === 2 ...)\n\t *\n\t * ----\n\t *\n\t * The (first*n1 + second*n2 + third*n3) format used in the property parser\n\t * is a simple way to hash the sequence of characters\n\t * taking into account the index they occur in\n\t * since any number of 3 character sequences could produce duplicates.\n\t *\n\t * On the other hand sequences that are directly tied to the index of the character\n\t * resolve a far more accurate measure, it's also faster\n\t * to evaluate one condition in a switch statement\n\t * than three in an if statement regardless of the added math.\n\t *\n\t * This allows the vendor prefixer to be both small and fast.\n\t */\n\n\tvar nullptn = /^\\0+/g /* matches leading null characters */\n\tvar formatptn = /[\\0\\r\\f]/g /* matches new line, null and formfeed characters */\n\tvar colonptn = /: */g /* splits animation rules */\n\tvar cursorptn = /zoo|gra/ /* assert cursor varient */\n\tvar transformptn = /([,: ])(transform)/g /* vendor prefix transform, older webkit */\n\tvar animationptn = /,+\\s*(?![^(]*[)])/g /* splits multiple shorthand notation animations */\n\tvar propertiesptn = / +\\s*(?![^(]*[)])/g /* animation properties */\n\tvar elementptn = / *[\\0] */g /* selector elements */\n\tvar selectorptn = /,\\r+?/g /* splits selectors */\n\tvar andptn = /([\\t\\r\\n ])*\\f?&/g /* match & */\n\tvar escapeptn = /:global\\(((?:[^\\(\\)\\[\\]]*|\\[.*\\]|\\([^\\(\\)]*\\))*)\\)/g /* matches :global(.*) */\n\tvar invalidptn = /\\W+/g /* removes invalid characters from keyframes */\n\tvar keyframeptn = /@(k\\w+)\\s*(\\S*)\\s*/ /* matches @keyframes $1 */\n\tvar plcholdrptn = /::(place)/g /* match ::placeholder varient */\n\tvar readonlyptn = /:(read-only)/g /* match :read-only varient */\n\tvar beforeptn = /\\s+(?=[{\\];=:>])/g /* matches \\s before ] ; = : */\n\tvar afterptn = /([[}=:>])\\s+/g /* matches \\s after characters [ } = : */\n\tvar tailptn = /(\\{[^{]+?);(?=\\})/g /* matches tail semi-colons ;} */\n\tvar whiteptn = /\\s{2,}/g /* matches repeating whitespace */\n\tvar pseudoptn = /([^\\(])(:+) */g /* pseudo element */\n\tvar writingptn = /[svh]\\w+-[tblr]{2}/ /* match writing mode property values */\n\tvar gradientptn = /([\\w-]+t\\()/g /* match *gradient property */\n\tvar supportsptn = /\\(\\s*(.*)\\s*\\)/g /* match supports (groups) */\n\tvar propertyptn = /([\\s\\S]*?);/g /* match properties leading semicolon */\n\tvar selfptn = /-self|flex-/g /* match flex- and -self in align-self: flex-*; */\n\tvar pseudofmt = /[^]*?(:[rp][el]a[\\w-]+)[^]*/ /* extrats :readonly or :placholder from selector */\n\tvar trimptn = /[ \\t]+$/ /* match tail whitspace */\n\tvar dimensionptn = /stretch|:\\s*\\w+\\-(?:conte|avail)/ /* match max/min/fit-content, fill-available */\n\tvar imgsrcptn = /([^-])(image-set\\()/\n\n\t/* vendors */\n\tvar webkit = '-webkit-'\n\tvar moz = '-moz-'\n\tvar ms = '-ms-'\n\n\t/* character codes */\n\tvar SEMICOLON = 59 /* ; */\n\tvar CLOSEBRACES = 125 /* } */\n\tvar OPENBRACES = 123 /* { */\n\tvar OPENPARENTHESES = 40 /* ( */\n\tvar CLOSEPARENTHESES = 41 /* ) */\n\tvar OPENBRACKET = 91 /* [ */\n\tvar CLOSEBRACKET = 93 /* ] */\n\tvar NEWLINE = 10 /* \\n */\n\tvar CARRIAGE = 13 /* \\r */\n\tvar TAB = 9 /* \\t */\n\tvar AT = 64 /* @ */\n\tvar SPACE = 32 /*   */\n\tvar AND = 38 /* & */\n\tvar DASH = 45 /* - */\n\tvar UNDERSCORE = 95 /* _ */\n\tvar STAR = 42 /* * */\n\tvar COMMA = 44 /* , */\n\tvar COLON = 58 /* : */\n\tvar SINGLEQUOTE = 39 /* ' */\n\tvar DOUBLEQUOTE = 34 /* \" */\n\tvar FOWARDSLASH = 47 /* / */\n\tvar GREATERTHAN = 62 /* > */\n\tvar PLUS = 43 /* + */\n\tvar TILDE = 126 /* ~ */\n\tvar NULL = 0 /* \\0 */\n\tvar FORMFEED = 12 /* \\f */\n\tvar VERTICALTAB = 11 /* \\v */\n\n\t/* special identifiers */\n\tvar KEYFRAME = 107 /* k */\n\tvar MEDIA = 109 /* m */\n\tvar SUPPORTS = 115 /* s */\n\tvar PLACEHOLDER = 112 /* p */\n\tvar READONLY = 111 /* o */\n\tvar IMPORT = 105 /* <at>i */\n\tvar CHARSET = 99 /* <at>c */\n\tvar DOCUMENT = 100 /* <at>d */\n\tvar PAGE = 112 /* <at>p */\n\n\tvar column = 1 /* current column */\n\tvar line = 1 /* current line numebr */\n\tvar pattern = 0 /* :pattern */\n\n\tvar cascade = 1 /* #id h1 h2 vs h1#id h2#id  */\n\tvar prefix = 1 /* vendor prefix */\n\tvar escape = 1 /* escape :global() pattern */\n\tvar compress = 0 /* compress output */\n\tvar semicolon = 0 /* no/semicolon option */\n\tvar preserve = 0 /* preserve empty selectors */\n\n\t/* empty reference */\n\tvar array = []\n\n\t/* plugins */\n\tvar plugins = []\n\tvar plugged = 0\n\tvar should = null\n\n\t/* plugin context */\n\tvar POSTS = -2\n\tvar PREPS = -1\n\tvar UNKWN = 0\n\tvar PROPS = 1\n\tvar BLCKS = 2\n\tvar ATRUL = 3\n\n\t/* plugin newline context */\n\tvar unkwn = 0\n\n\t/* keyframe animation */\n\tvar keyed = 1\n\tvar key = ''\n\n\t/* selector namespace */\n\tvar nscopealt = ''\n\tvar nscope = ''\n\n\t/**\n\t * Compile\n\t *\n\t * @param {Array<string>} parent\n\t * @param {Array<string>} current\n\t * @param {string} body\n\t * @param {number} id\n\t * @param {number} depth\n\t * @return {string}\n\t */\n\tfunction compile (parent, current, body, id, depth) {\n\t\tvar bracket = 0 /* brackets [] */\n\t\tvar comment = 0 /* comments /* // or /* */\n\t\tvar parentheses = 0 /* functions () */\n\t\tvar quote = 0 /* quotes '', \"\" */\n\n\t\tvar first = 0 /* first character code */\n\t\tvar second = 0 /* second character code */\n\t\tvar code = 0 /* current character code */\n\t\tvar tail = 0 /* previous character code */\n\t\tvar trail = 0 /* character before previous code */\n\t\tvar peak = 0 /* previous non-whitespace code */\n\n\t\tvar counter = 0 /* count sequence termination */\n\t\tvar context = 0 /* track current context */\n\t\tvar atrule = 0 /* track @at-rule context */\n\t\tvar pseudo = 0 /* track pseudo token index */\n\t\tvar caret = 0 /* current character index */\n\t\tvar format = 0 /* control character formating context */\n\t\tvar insert = 0 /* auto semicolon insertion */\n\t\tvar invert = 0 /* inverted selector pattern */\n\t\tvar length = 0 /* generic length address */\n\t\tvar eof = body.length /* end of file(length) */\n\t\tvar eol = eof - 1 /* end of file(characters) */\n\n\t\tvar char = '' /* current character */\n\t\tvar chars = '' /* current buffer of characters */\n\t\tvar child = '' /* next buffer of characters */\n\t\tvar out = '' /* compiled body */\n\t\tvar children = '' /* compiled children */\n\t\tvar flat = '' /* compiled leafs */\n\t\tvar selector /* generic selector address */\n\t\tvar result /* generic address */\n\n\t\t// ...build body\n\t\twhile (caret < eof) {\n\t\t\tcode = body.charCodeAt(caret)\n\n\t\t\t// eof varient\n\t\t\tif (caret === eol) {\n\t\t\t\t// last character + noop context, add synthetic padding for noop context to terminate\n\t\t\t\tif (comment + quote + parentheses + bracket !== 0) {\n\t\t\t\t\tif (comment !== 0) {\n\t\t\t\t\t\tcode = comment === FOWARDSLASH ? NEWLINE : FOWARDSLASH\n\t\t\t\t\t}\n\n\t\t\t\t\tquote = parentheses = bracket = 0\n\t\t\t\t\teof++\n\t\t\t\t\teol++\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (comment + quote + parentheses + bracket === 0) {\n\t\t\t\t// eof varient\n\t\t\t\tif (caret === eol) {\n\t\t\t\t\tif (format > 0) {\n\t\t\t\t\t\tchars = chars.replace(formatptn, '')\n\t\t\t\t\t}\n\n\t\t\t\t\tif (chars.trim().length > 0) {\n\t\t\t\t\t\tswitch (code) {\n\t\t\t\t\t\t\tcase SPACE:\n\t\t\t\t\t\t\tcase TAB:\n\t\t\t\t\t\t\tcase SEMICOLON:\n\t\t\t\t\t\t\tcase CARRIAGE:\n\t\t\t\t\t\t\tcase NEWLINE: {\n\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdefault: {\n\t\t\t\t\t\t\t\tchars += body.charAt(caret)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcode = SEMICOLON\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// auto semicolon insertion\n\t\t\t\tif (insert === 1) {\n\t\t\t\t\tswitch (code) {\n\t\t\t\t\t\t// false flags\n\t\t\t\t\t\tcase OPENBRACES:\n\t\t\t\t\t\tcase CLOSEBRACES:\n\t\t\t\t\t\tcase SEMICOLON:\n\t\t\t\t\t\tcase DOUBLEQUOTE:\n\t\t\t\t\t\tcase SINGLEQUOTE:\n\t\t\t\t\t\tcase OPENPARENTHESES:\n\t\t\t\t\t\tcase CLOSEPARENTHESES:\n\t\t\t\t\t\tcase COMMA: {\n\t\t\t\t\t\t\tinsert = 0\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// ignore\n\t\t\t\t\t\tcase TAB:\n\t\t\t\t\t\tcase CARRIAGE:\n\t\t\t\t\t\tcase NEWLINE:\n\t\t\t\t\t\tcase SPACE: {\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// valid\n\t\t\t\t\t\tdefault: {\n\t\t\t\t\t\t\tinsert = 0\n\t\t\t\t\t\t\tlength = caret\n\t\t\t\t\t\t\tfirst = code\n\t\t\t\t\t\t\tcaret--\n\t\t\t\t\t\t\tcode = SEMICOLON\n\n\t\t\t\t\t\t\twhile (length < eof) {\n\t\t\t\t\t\t\t\tswitch (body.charCodeAt(length++)) {\n\t\t\t\t\t\t\t\t\tcase NEWLINE:\n\t\t\t\t\t\t\t\t\tcase CARRIAGE:\n\t\t\t\t\t\t\t\t\tcase SEMICOLON: {\n\t\t\t\t\t\t\t\t\t\t++caret\n\t\t\t\t\t\t\t\t\t\tcode = first\n\t\t\t\t\t\t\t\t\t\tlength = eof\n\t\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tcase COLON: {\n\t\t\t\t\t\t\t\t\t\tif (format > 0) {\n\t\t\t\t\t\t\t\t\t\t\t++caret\n\t\t\t\t\t\t\t\t\t\t\tcode = first\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tcase OPENBRACES: {\n\t\t\t\t\t\t\t\t\t\tlength = eof\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// token varient\n\t\t\t\tswitch (code) {\n\t\t\t\t\tcase OPENBRACES: {\n\t\t\t\t\t\tchars = chars.trim()\n\t\t\t\t\t\tfirst = chars.charCodeAt(0)\n\t\t\t\t\t\tcounter = 1\n\t\t\t\t\t\tlength = ++caret\n\n\t\t\t\t\t\twhile (caret < eof) {\n\t\t\t\t\t\t\tswitch (code = body.charCodeAt(caret)) {\n\t\t\t\t\t\t\t\tcase OPENBRACES: {\n\t\t\t\t\t\t\t\t\tcounter++\n\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcase CLOSEBRACES: {\n\t\t\t\t\t\t\t\t\tcounter--\n\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcase FOWARDSLASH: {\n\t\t\t\t\t\t\t\t\tswitch (second = body.charCodeAt(caret + 1)) {\n\t\t\t\t\t\t\t\t\t\t// /*, //\n\t\t\t\t\t\t\t\t\t\tcase STAR:\n\t\t\t\t\t\t\t\t\t\tcase FOWARDSLASH: {\n\t\t\t\t\t\t\t\t\t\t\tcaret = delimited(second, caret, eol, body)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// given \"[\" === 91 & \"]\" === 93 hence forth 91 + 1 + 1 === 93\n\t\t\t\t\t\t\t\tcase OPENBRACKET: {\n\t\t\t\t\t\t\t\t\tcode++\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// given \"(\" === 40 & \")\" === 41 hence forth 40 + 1 === 41\n\t\t\t\t\t\t\t\tcase OPENPARENTHESES: {\n\t\t\t\t\t\t\t\t\tcode++\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// quote tail delimiter is identical to the head delimiter hence noop,\n\t\t\t\t\t\t\t\t// fallthrough clauses have been shifted to the correct tail delimiter\n\t\t\t\t\t\t\t\tcase DOUBLEQUOTE:\n\t\t\t\t\t\t\t\tcase SINGLEQUOTE: {\n\t\t\t\t\t\t\t\t\twhile (caret++ < eol) {\n\t\t\t\t\t\t\t\t\t\tif (body.charCodeAt(caret) === code) {\n\t\t\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (counter === 0) {\n\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tcaret++\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tchild = body.substring(length, caret)\n\n\t\t\t\t\t\tif (first === NULL) {\n\t\t\t\t\t\t\tfirst = (chars = chars.replace(nullptn, '').trim()).charCodeAt(0)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tswitch (first) {\n\t\t\t\t\t\t\t// @at-rule\n\t\t\t\t\t\t\tcase AT: {\n\t\t\t\t\t\t\t\tif (format > 0) {\n\t\t\t\t\t\t\t\t\tchars = chars.replace(formatptn, '')\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tsecond = chars.charCodeAt(1)\n\n\t\t\t\t\t\t\t\tswitch (second) {\n\t\t\t\t\t\t\t\t\tcase DOCUMENT:\n\t\t\t\t\t\t\t\t\tcase MEDIA:\n\t\t\t\t\t\t\t\t\tcase SUPPORTS:\n\t\t\t\t\t\t\t\t\tcase DASH: {\n\t\t\t\t\t\t\t\t\t\tselector = current\n\t\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tdefault: {\n\t\t\t\t\t\t\t\t\t\tselector = array\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tchild = compile(current, selector, child, second, depth+1)\n\t\t\t\t\t\t\t\tlength = child.length\n\n\t\t\t\t\t\t\t\t// preserve empty @at-rule\n\t\t\t\t\t\t\t\tif (preserve > 0 && length === 0) {\n\t\t\t\t\t\t\t\t\tlength = chars.length\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// execute plugins, @at-rule context\n\t\t\t\t\t\t\t\tif (plugged > 0) {\n\t\t\t\t\t\t\t\t\tselector = select(array, chars, invert)\n\t\t\t\t\t\t\t\t\tresult = proxy(ATRUL, child, selector, current, line, column, length, second, depth, id)\n\t\t\t\t\t\t\t\t\tchars = selector.join('')\n\n\t\t\t\t\t\t\t\t\tif (result !== void 0) {\n\t\t\t\t\t\t\t\t\t\tif ((length = (child = result.trim()).length) === 0) {\n\t\t\t\t\t\t\t\t\t\t\tsecond = 0\n\t\t\t\t\t\t\t\t\t\t\tchild = ''\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (length > 0) {\n\t\t\t\t\t\t\t\t\tswitch (second) {\n\t\t\t\t\t\t\t\t\t\tcase SUPPORTS: {\n\t\t\t\t\t\t\t\t\t\t\tchars = chars.replace(supportsptn, supports)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tcase DOCUMENT:\n\t\t\t\t\t\t\t\t\t\tcase MEDIA:\n\t\t\t\t\t\t\t\t\t\tcase DASH: {\n\t\t\t\t\t\t\t\t\t\t\tchild = chars + '{' + child + '}'\n\t\t\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tcase KEYFRAME: {\n\t\t\t\t\t\t\t\t\t\t\tchars = chars.replace(keyframeptn, '$1 $2' + (keyed > 0 ? key : ''))\n\t\t\t\t\t\t\t\t\t\t\tchild = chars + '{' + child + '}'\n\n\t\t\t\t\t\t\t\t\t\t\tif (prefix === 1 || (prefix === 2 && vendor('@'+child, 3))) {\n\t\t\t\t\t\t\t\t\t\t\t\tchild = '@' + webkit + child + '@' + child\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\tchild = '@' + child\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tdefault: {\n\t\t\t\t\t\t\t\t\t\t\tchild = chars + child\n\n\t\t\t\t\t\t\t\t\t\t\tif (id === PAGE) {\n\t\t\t\t\t\t\t\t\t\t\t\tchild = (out += child, '')\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tchild = ''\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// selector\n\t\t\t\t\t\t\tdefault: {\n\t\t\t\t\t\t\t\tchild = compile(current, select(current, chars, invert), child, id, depth+1)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tchildren += child\n\n\t\t\t\t\t\t// reset\n\t\t\t\t\t\tcontext = 0\n\t\t\t\t\t\tinsert = 0\n\t\t\t\t\t\tpseudo = 0\n\t\t\t\t\t\tformat = 0\n\t\t\t\t\t\tinvert = 0\n\t\t\t\t\t\tatrule = 0\n\t\t\t\t\t\tchars = ''\n\t\t\t\t\t\tchild = ''\n\t\t\t\t\t\tcode = body.charCodeAt(++caret)\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t\tcase CLOSEBRACES:\n\t\t\t\t\tcase SEMICOLON: {\n\t\t\t\t\t\tchars = (format > 0 ? chars.replace(formatptn, '') : chars).trim()\n\n\t\t\t\t\t\tif ((length = chars.length) > 1) {\n\t\t\t\t\t\t\t// monkey-patch missing colon\n\t\t\t\t\t\t\tif (pseudo === 0) {\n\t\t\t\t\t\t\t\tfirst = chars.charCodeAt(0)\n\n\t\t\t\t\t\t\t\t// first character is a letter or dash, buffer has a space character\n\t\t\t\t\t\t\t\tif ((first === DASH || first > 96 && first < 123)) {\n\t\t\t\t\t\t\t\t\tlength = (chars = chars.replace(' ', ':')).length\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// execute plugins, property context\n\t\t\t\t\t\t\tif (plugged > 0) {\n\t\t\t\t\t\t\t\tif ((result = proxy(PROPS, chars, current, parent, line, column, out.length, id, depth, id)) !== void 0) {\n\t\t\t\t\t\t\t\t\tif ((length = (chars = result.trim()).length) === 0) {\n\t\t\t\t\t\t\t\t\t\tchars = '\\0\\0'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tfirst = chars.charCodeAt(0)\n\t\t\t\t\t\t\tsecond = chars.charCodeAt(1)\n\n\t\t\t\t\t\t\tswitch (first) {\n\t\t\t\t\t\t\t\tcase NULL: {\n\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcase AT: {\n\t\t\t\t\t\t\t\t\tif (second === IMPORT || second === CHARSET) {\n\t\t\t\t\t\t\t\t\t\tflat += chars + body.charAt(caret)\n\t\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdefault: {\n\t\t\t\t\t\t\t\t\tif (chars.charCodeAt(length-1) === COLON) {\n\t\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tout += property(chars, first, second, chars.charCodeAt(2))\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// reset\n\t\t\t\t\t\tcontext = 0\n\t\t\t\t\t\tinsert = 0\n\t\t\t\t\t\tpseudo = 0\n\t\t\t\t\t\tformat = 0\n\t\t\t\t\t\tinvert = 0\n\t\t\t\t\t\tchars = ''\n\t\t\t\t\t\tcode = body.charCodeAt(++caret)\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// parse characters\n\t\t\tswitch (code) {\n\t\t\t\tcase CARRIAGE:\n\t\t\t\tcase NEWLINE: {\n\t\t\t\t\t// auto insert semicolon\n\t\t\t\t\tif (comment + quote + parentheses + bracket + semicolon === 0) {\n\t\t\t\t\t\t// valid non-whitespace characters that\n\t\t\t\t\t\t// may precede a newline\n\t\t\t\t\t\tswitch (peak) {\n\t\t\t\t\t\t\tcase CLOSEPARENTHESES:\n\t\t\t\t\t\t\tcase SINGLEQUOTE:\n\t\t\t\t\t\t\tcase DOUBLEQUOTE:\n\t\t\t\t\t\t\tcase AT:\n\t\t\t\t\t\t\tcase TILDE:\n\t\t\t\t\t\t\tcase GREATERTHAN:\n\t\t\t\t\t\t\tcase STAR:\n\t\t\t\t\t\t\tcase PLUS:\n\t\t\t\t\t\t\tcase FOWARDSLASH:\n\t\t\t\t\t\t\tcase DASH:\n\t\t\t\t\t\t\tcase COLON:\n\t\t\t\t\t\t\tcase COMMA:\n\t\t\t\t\t\t\tcase SEMICOLON:\n\t\t\t\t\t\t\tcase OPENBRACES:\n\t\t\t\t\t\t\tcase CLOSEBRACES: {\n\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdefault: {\n\t\t\t\t\t\t\t\t// current buffer has a colon\n\t\t\t\t\t\t\t\tif (pseudo > 0) {\n\t\t\t\t\t\t\t\t\tinsert = 1\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// terminate line comment\n\t\t\t\t\tif (comment === FOWARDSLASH) {\n\t\t\t\t\t\tcomment = 0\n\t\t\t\t\t} else if (cascade + context === 0 && id !== KEYFRAME && chars.length > 0) {\n\t\t\t\t\t\tformat = 1\n\t\t\t\t\t\tchars += '\\0'\n\t\t\t\t\t}\n\n\t\t\t\t\t// execute plugins, newline context\n\t\t\t\t\tif (plugged * unkwn > 0) {\n\t\t\t\t\t\tproxy(UNKWN, chars, current, parent, line, column, out.length, id, depth, id)\n\t\t\t\t\t}\n\n\t\t\t\t\t// next line, reset column position\n\t\t\t\t\tcolumn = 1\n\t\t\t\t\tline++\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t\tcase SEMICOLON:\n\t\t\t\tcase CLOSEBRACES: {\n\t\t\t\t\tif (comment + quote + parentheses + bracket === 0) {\n\t\t\t\t\t\tcolumn++\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdefault: {\n\t\t\t\t\t// increment column position\n\t\t\t\t\tcolumn++\n\n\t\t\t\t\t// current character\n\t\t\t\t\tchar = body.charAt(caret)\n\n\t\t\t\t\t// remove comments, escape functions, strings, attributes and prepare selectors\n\t\t\t\t\tswitch (code) {\n\t\t\t\t\t\tcase TAB:\n\t\t\t\t\t\tcase SPACE: {\n\t\t\t\t\t\t\tif (quote + bracket + comment === 0) {\n\t\t\t\t\t\t\t\tswitch (tail) {\n\t\t\t\t\t\t\t\t\tcase COMMA:\n\t\t\t\t\t\t\t\t\tcase COLON:\n\t\t\t\t\t\t\t\t\tcase TAB:\n\t\t\t\t\t\t\t\t\tcase SPACE: {\n\t\t\t\t\t\t\t\t\t\tchar = ''\n\t\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tdefault: {\n\t\t\t\t\t\t\t\t\t\tif (code !== SPACE) {\n\t\t\t\t\t\t\t\t\t\t\tchar = ' '\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// escape breaking control characters\n\t\t\t\t\t\tcase NULL: {\n\t\t\t\t\t\t\tchar = '\\\\0'\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase FORMFEED: {\n\t\t\t\t\t\t\tchar = '\\\\f'\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase VERTICALTAB: {\n\t\t\t\t\t\t\tchar = '\\\\v'\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// &\n\t\t\t\t\t\tcase AND: {\n\t\t\t\t\t\t\t// inverted selector pattern i.e html &\n\t\t\t\t\t\t\tif (quote + comment + bracket === 0 && cascade > 0) {\n\t\t\t\t\t\t\t\tinvert = 1\n\t\t\t\t\t\t\t\tformat = 1\n\t\t\t\t\t\t\t\tchar = '\\f' + char\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// ::p<l>aceholder, l\n\t\t\t\t\t\t// :read-on<l>y, l\n\t\t\t\t\t\tcase 108: {\n\t\t\t\t\t\t\tif (quote + comment + bracket + pattern === 0 && pseudo > 0) {\n\t\t\t\t\t\t\t\tswitch (caret - pseudo) {\n\t\t\t\t\t\t\t\t\t// ::placeholder\n\t\t\t\t\t\t\t\t\tcase 2: {\n\t\t\t\t\t\t\t\t\t\tif (tail === PLACEHOLDER && body.charCodeAt(caret-3) === COLON) {\n\t\t\t\t\t\t\t\t\t\t\tpattern = tail\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t// :read-only\n\t\t\t\t\t\t\t\t\tcase 8: {\n\t\t\t\t\t\t\t\t\t\tif (trail === READONLY) {\n\t\t\t\t\t\t\t\t\t\t\tpattern = trail\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// :<pattern>\n\t\t\t\t\t\tcase COLON: {\n\t\t\t\t\t\t\tif (quote + comment + bracket === 0) {\n\t\t\t\t\t\t\t\tpseudo = caret\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// selectors\n\t\t\t\t\t\tcase COMMA: {\n\t\t\t\t\t\t\tif (comment + parentheses + quote + bracket === 0) {\n\t\t\t\t\t\t\t\tformat = 1\n\t\t\t\t\t\t\t\tchar += '\\r'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// quotes\n\t\t\t\t\t\tcase DOUBLEQUOTE:\n\t\t\t\t\t\tcase SINGLEQUOTE: {\n\t\t\t\t\t\t\tif (comment === 0) {\n\t\t\t\t\t\t\t\tquote = quote === code ? 0 : (quote === 0 ? code : quote)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// attributes\n\t\t\t\t\t\tcase OPENBRACKET: {\n\t\t\t\t\t\t\tif (quote + comment + parentheses === 0) {\n\t\t\t\t\t\t\t\tbracket++\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase CLOSEBRACKET: {\n\t\t\t\t\t\t\tif (quote + comment + parentheses === 0) {\n\t\t\t\t\t\t\t\tbracket--\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// functions\n\t\t\t\t\t\tcase CLOSEPARENTHESES: {\n\t\t\t\t\t\t\tif (quote + comment + bracket === 0) {\n\t\t\t\t\t\t\t\tparentheses--\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase OPENPARENTHESES: {\n\t\t\t\t\t\t\tif (quote + comment + bracket === 0) {\n\t\t\t\t\t\t\t\tif (context === 0) {\n\t\t\t\t\t\t\t\t\tswitch (tail*2 + trail*3) {\n\t\t\t\t\t\t\t\t\t\t// :matches\n\t\t\t\t\t\t\t\t\t\tcase 533: {\n\t\t\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t// :global, :not, :nth-child etc...\n\t\t\t\t\t\t\t\t\t\tdefault: {\n\t\t\t\t\t\t\t\t\t\t\tcounter = 0\n\t\t\t\t\t\t\t\t\t\t\tcontext = 1\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tparentheses++\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase AT: {\n\t\t\t\t\t\t\tif (comment + parentheses + quote + bracket + pseudo + atrule === 0) {\n\t\t\t\t\t\t\t\tatrule = 1\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// block/line comments\n\t\t\t\t\t\tcase STAR:\n\t\t\t\t\t\tcase FOWARDSLASH: {\n\t\t\t\t\t\t\tif (quote + bracket + parentheses > 0) {\n\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tswitch (comment) {\n\t\t\t\t\t\t\t\t// initialize line/block comment context\n\t\t\t\t\t\t\t\tcase 0: {\n\t\t\t\t\t\t\t\t\tswitch (code*2 + body.charCodeAt(caret+1)*3) {\n\t\t\t\t\t\t\t\t\t\t// //\n\t\t\t\t\t\t\t\t\t\tcase 235: {\n\t\t\t\t\t\t\t\t\t\t\tcomment = FOWARDSLASH\n\t\t\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t// /*\n\t\t\t\t\t\t\t\t\t\tcase 220: {\n\t\t\t\t\t\t\t\t\t\t\tlength = caret\n\t\t\t\t\t\t\t\t\t\t\tcomment = STAR\n\t\t\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// end block comment context\n\t\t\t\t\t\t\t\tcase STAR: {\n\t\t\t\t\t\t\t\t\tif (code === FOWARDSLASH && tail === STAR && length + 2 !== caret) {\n\t\t\t\t\t\t\t\t\t\t// /*<!> ... */, !\n\t\t\t\t\t\t\t\t\t\tif (body.charCodeAt(length+2) === 33) {\n\t\t\t\t\t\t\t\t\t\t\tout += body.substring(length, caret+1)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tchar = ''\n\t\t\t\t\t\t\t\t\t\tcomment = 0\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// ignore comment blocks\n\t\t\t\t\tif (comment === 0) {\n\t\t\t\t\t\t// aggressive isolation mode, divide each individual selector\n\t\t\t\t\t\t// including selectors in :not function but excluding selectors in :global function\n\t\t\t\t\t\tif (cascade + quote + bracket + atrule === 0 && id !== KEYFRAME && code !== SEMICOLON) {\n\t\t\t\t\t\t\tswitch (code) {\n\t\t\t\t\t\t\t\tcase COMMA:\n\t\t\t\t\t\t\t\tcase TILDE:\n\t\t\t\t\t\t\t\tcase GREATERTHAN:\n\t\t\t\t\t\t\t\tcase PLUS:\n\t\t\t\t\t\t\t\tcase CLOSEPARENTHESES:\n\t\t\t\t\t\t\t\tcase OPENPARENTHESES: {\n\t\t\t\t\t\t\t\t\tif (context === 0) {\n\t\t\t\t\t\t\t\t\t\t// outside of an isolated context i.e nth-child(<...>)\n\t\t\t\t\t\t\t\t\t\tswitch (tail) {\n\t\t\t\t\t\t\t\t\t\t\tcase TAB:\n\t\t\t\t\t\t\t\t\t\t\tcase SPACE:\n\t\t\t\t\t\t\t\t\t\t\tcase NEWLINE:\n\t\t\t\t\t\t\t\t\t\t\tcase CARRIAGE: {\n\t\t\t\t\t\t\t\t\t\t\t\tchar = char + '\\0'\n\t\t\t\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tdefault: {\n\t\t\t\t\t\t\t\t\t\t\t\tchar = '\\0' + char + (code === COMMA ? '' : '\\0')\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tformat = 1\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t// within an isolated context, sleep untill it's terminated\n\t\t\t\t\t\t\t\t\t\tswitch (code) {\n\t\t\t\t\t\t\t\t\t\t\tcase OPENPARENTHESES: {\n\t\t\t\t\t\t\t\t\t\t\t\t// :globa<l>(\n\t\t\t\t\t\t\t\t\t\t\t\tif (pseudo + 7 === caret && tail === 108) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tpseudo = 0\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tcontext = ++counter\n\t\t\t\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tcase CLOSEPARENTHESES: {\n\t\t\t\t\t\t\t\t\t\t\t\tif ((context = --counter) === 0) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tformat = 1\n\t\t\t\t\t\t\t\t\t\t\t\t\tchar += '\\0'\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcase TAB:\n\t\t\t\t\t\t\t\tcase SPACE: {\n\t\t\t\t\t\t\t\t\tswitch (tail) {\n\t\t\t\t\t\t\t\t\t\tcase NULL:\n\t\t\t\t\t\t\t\t\t\tcase OPENBRACES:\n\t\t\t\t\t\t\t\t\t\tcase CLOSEBRACES:\n\t\t\t\t\t\t\t\t\t\tcase SEMICOLON:\n\t\t\t\t\t\t\t\t\t\tcase COMMA:\n\t\t\t\t\t\t\t\t\t\tcase FORMFEED:\n\t\t\t\t\t\t\t\t\t\tcase TAB:\n\t\t\t\t\t\t\t\t\t\tcase SPACE:\n\t\t\t\t\t\t\t\t\t\tcase NEWLINE:\n\t\t\t\t\t\t\t\t\t\tcase CARRIAGE: {\n\t\t\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tdefault: {\n\t\t\t\t\t\t\t\t\t\t\t// ignore in isolated contexts\n\t\t\t\t\t\t\t\t\t\t\tif (context === 0) {\n\t\t\t\t\t\t\t\t\t\t\t\tformat = 1\n\t\t\t\t\t\t\t\t\t\t\t\tchar += '\\0'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// concat buffer of characters\n\t\t\t\t\t\tchars += char\n\n\t\t\t\t\t\t// previous non-whitespace character code\n\t\t\t\t\t\tif (code !== SPACE && code !== TAB) {\n\t\t\t\t\t\t\tpeak = code\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// tail character codes\n\t\t\ttrail = tail\n\t\t\ttail = code\n\n\t\t\t// visit every character\n\t\t\tcaret++\n\t\t}\n\n\t\tlength = out.length\n\n\t\t// preserve empty selector\n \t\tif (preserve > 0) {\n \t\t\tif (length === 0 && children.length === 0 && (current[0].length === 0) === false) {\n \t\t\t\tif (id !== MEDIA || (current.length === 1 && (cascade > 0 ? nscopealt : nscope) === current[0])) {\n\t\t\t\t\tlength = current.join(',').length + 2\n \t\t\t\t}\n \t\t\t}\n\t\t}\n\n\t\tif (length > 0) {\n\t\t\t// cascade isolation mode?\n\t\t\tselector = cascade === 0 && id !== KEYFRAME ? isolate(current) : current\n\n\t\t\t// execute plugins, block context\n\t\t\tif (plugged > 0) {\n\t\t\t\tresult = proxy(BLCKS, out, selector, parent, line, column, length, id, depth, id)\n\n\t\t\t\tif (result !== void 0 && (out = result).length === 0) {\n\t\t\t\t\treturn flat + out + children\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tout = selector.join(',') + '{' + out + '}'\n\n\t\t\tif (prefix*pattern !== 0) {\n\t\t\t\tif (prefix === 2 && !vendor(out, 2))\n\t\t\t\t\tpattern = 0\n\n\t\t\t\tswitch (pattern) {\n\t\t\t\t\t// ::read-only\n\t\t\t\t\tcase READONLY: {\n\t\t\t\t\t\tout = out.replace(readonlyptn, ':'+moz+'$1')+out\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t\t// ::placeholder\n\t\t\t\t\tcase PLACEHOLDER: {\n\t\t\t\t\t\tout = (\n\t\t\t\t\t\t\tout.replace(plcholdrptn, '::' + webkit + 'input-$1') +\n\t\t\t\t\t\t\tout.replace(plcholdrptn, '::' + moz + '$1') +\n\t\t\t\t\t\t\tout.replace(plcholdrptn, ':' + ms + 'input-$1') + out\n\t\t\t\t\t\t)\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tpattern = 0\n\t\t\t}\n\t\t}\n\n\t\treturn flat + out + children\n\t}\n\n\t/**\n\t * Select\n\t *\n\t * @param {Array<string>} parent\n\t * @param {string} current\n\t * @param {number} invert\n\t * @return {Array<string>}\n\t */\n\tfunction select (parent, current, invert) {\n\t\tvar selectors = current.trim().split(selectorptn)\n\t\tvar out = selectors\n\n\t\tvar length = selectors.length\n\t\tvar l = parent.length\n\n\t\tswitch (l) {\n\t\t\t// 0-1 parent selectors\n\t\t\tcase 0:\n\t\t\tcase 1: {\n\t\t\t\tfor (var i = 0, selector = l === 0 ? '' : parent[0] + ' '; i < length; ++i) {\n\t\t\t\t\tout[i] = scope(selector, out[i], invert, l).trim()\n\t\t\t\t}\n\t\t\t\tbreak\n\t\t\t}\n\t\t\t// >2 parent selectors, nested\n\t\t\tdefault: {\n\t\t\t\tfor (var i = 0, j = 0, out = []; i < length; ++i) {\n\t\t\t\t\tfor (var k = 0; k < l; ++k) {\n\t\t\t\t\t\tout[j++] = scope(parent[k] + ' ', selectors[i], invert, l).trim()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn out\n\t}\n\n\t/**\n\t * Scope\n\t *\n\t * @param {string} parent\n\t * @param {string} current\n\t * @param {number} invert\n\t * @param {number} level\n\t * @return {string}\n\t */\n\tfunction scope (parent, current, invert, level) {\n\t\tvar selector = current\n\t\tvar code = selector.charCodeAt(0)\n\n\t\t// trim leading whitespace\n\t\tif (code < 33) {\n\t\t\tcode = (selector = selector.trim()).charCodeAt(0)\n\t\t}\n\n\t\tswitch (code) {\n\t\t\t// &\n\t\t\tcase AND: {\n\t\t\t\tswitch (cascade + level) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\tcase 1: {\n\t\t\t\t\t\tif (parent.trim().length === 0) {\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdefault: {\n\t\t\t\t\t\treturn selector.replace(andptn, '$1'+parent.trim())\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak\n\t\t\t}\n\t\t\t// :\n\t\t\tcase COLON: {\n\t\t\t\tswitch (selector.charCodeAt(1)) {\n\t\t\t\t\t// g in :global\n\t\t\t\t\tcase 103: {\n\t\t\t\t\t\tif (escape > 0 && cascade > 0) {\n\t\t\t\t\t\t\treturn selector.replace(escapeptn, '$1').replace(andptn, '$1'+nscope)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t\tdefault: {\n\t\t\t\t\t\t// :hover\n\t\t\t\t\t\treturn parent.trim() + selector.replace(andptn, '$1'+parent.trim())\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\t// html &\n\t\t\t\tif (invert*cascade > 0 && selector.indexOf('\\f') > 0) {\n\t\t\t\t\treturn selector.replace(andptn, (parent.charCodeAt(0) === COLON ? '' : '$1')+parent.trim())\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn parent + selector\n\t}\n\n\t/**\n\t * Property\n\t *\n\t * @param {string} input\n\t * @param {number} first\n\t * @param {number} second\n\t * @param {number} third\n\t * @return {string}\n\t */\n\tfunction property (input, first, second, third) {\n\t\tvar index = 0\n\t\tvar out = input + ';'\n\t\tvar hash = (first*2) + (second*3) + (third*4)\n\t\tvar cache\n\n\t\t// animation: a, n, i characters\n\t\tif (hash === 944) {\n\t\t\treturn animation(out)\n\t\t} else if (prefix === 0 || (prefix === 2 && !vendor(out, 1))) {\n\t\t\treturn out\n\t\t}\n\n\t\t// vendor prefix\n\t\tswitch (hash) {\n\t\t\t// text-decoration/text-size-adjust/text-shadow/text-align/text-transform: t, e, x\n\t\t\tcase 1015: {\n\t\t\t\t// text-shadow/text-align/text-transform, a\n\t\t\t\treturn out.charCodeAt(10) === 97 ? webkit + out + out : out\n\t\t\t}\n\t\t\t// filter/fill f, i, l\n\t\t\tcase 951: {\n\t\t\t\t// filter, t\n\t\t\t\treturn out.charCodeAt(3) === 116 ? webkit + out + out : out\n\t\t\t}\n\t\t\t// color/column, c, o, l\n\t\t\tcase 963: {\n\t\t\t\t// column, n\n\t\t\t\treturn out.charCodeAt(5) === 110 ? webkit + out + out : out\n\t\t\t}\n\t\t\t// box-decoration-break, b, o, x\n\t\t\tcase 1009: {\n\t\t\t\tif (out.charCodeAt(4) !== 100) {\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t\t// mask, m, a, s\n\t\t\t// clip-path, c, l, i\n\t\t\tcase 969:\n\t\t\tcase 942: {\n\t\t\t\treturn webkit + out + out\n\t\t\t}\n\t\t\t// appearance: a, p, p\n\t\t\tcase 978: {\n\t\t\t\treturn webkit + out + moz + out + out\n\t\t\t}\n\t\t\t// hyphens: h, y, p\n\t\t\t// user-select: u, s, e\n\t\t\tcase 1019:\n\t\t\tcase 983: {\n\t\t\t\treturn webkit + out + moz + out + ms + out + out\n\t\t\t}\n\t\t\t// background/backface-visibility, b, a, c\n\t\t\tcase 883: {\n\t\t\t\t// backface-visibility, -\n\t\t\t\tif (out.charCodeAt(8) === DASH) {\n\t\t\t\t\treturn webkit + out + out\n\t\t\t\t}\n\n\t\t\t\t// image-set(...)\n\t\t\t\tif (out.indexOf('image-set(', 11) > 0) {\n\t\t\t\t\treturn out.replace(imgsrcptn, '$1'+webkit+'$2') + out\n\t\t\t\t}\n\n\t\t\t\treturn out\n\t\t\t}\n\t\t\t// flex: f, l, e\n\t\t\tcase 932: {\n\t\t\t\tif (out.charCodeAt(4) === DASH) {\n\t\t\t\t\tswitch (out.charCodeAt(5)) {\n\t\t\t\t\t\t// flex-grow, g\n\t\t\t\t\t\tcase 103: {\n\t\t\t\t\t\t\treturn webkit + 'box-' + out.replace('-grow', '') + webkit + out + ms + out.replace('grow', 'positive') + out\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// flex-shrink, s\n\t\t\t\t\t\tcase 115: {\n\t\t\t\t\t\t\treturn webkit + out + ms + out.replace('shrink', 'negative') + out\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// flex-basis, b\n\t\t\t\t\t\tcase 98: {\n\t\t\t\t\t\t\treturn webkit + out + ms + out.replace('basis', 'preferred-size') + out\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn webkit + out + ms + out + out\n\t\t\t}\n\t\t\t// order: o, r, d\n\t\t\tcase 964: {\n\t\t\t\treturn webkit + out + ms + 'flex' + '-' + out + out\n\t\t\t}\n\t\t\t// justify-items/justify-content, j, u, s\n\t\t\tcase 1023: {\n\t\t\t\t// justify-content, c\n\t\t\t\tif (out.charCodeAt(8) !== 99) {\n\t\t\t\t\tbreak\n\t\t\t\t}\n\n\t\t\t\tcache = out.substring(out.indexOf(':', 15)).replace('flex-', '').replace('space-between', 'justify')\n\t\t\t\treturn webkit + 'box-pack' + cache + webkit + out + ms + 'flex-pack' + cache + out\n\t\t\t}\n\t\t\t// cursor, c, u, r\n\t\t\tcase 1005: {\n\t\t\t\treturn cursorptn.test(out) ? out.replace(colonptn, ':' + webkit) + out.replace(colonptn, ':' + moz) + out : out\n\t\t\t}\n\t\t\t// writing-mode, w, r, i\n\t\t\tcase 1000: {\n\t\t\t\tcache = out.substring(13).trim()\n\t\t\t\tindex = cache.indexOf('-') + 1\n\n\t\t\t\tswitch (cache.charCodeAt(0)+cache.charCodeAt(index)) {\n\t\t\t\t\t// vertical-lr\n\t\t\t\t\tcase 226: {\n\t\t\t\t\t\tcache = out.replace(writingptn, 'tb')\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t\t// vertical-rl\n\t\t\t\t\tcase 232: {\n\t\t\t\t\t\tcache = out.replace(writingptn, 'tb-rl')\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t\t// horizontal-tb\n\t\t\t\t\tcase 220: {\n\t\t\t\t\t\tcache = out.replace(writingptn, 'lr')\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t\tdefault: {\n\t\t\t\t\t\treturn out\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn webkit + out + ms + cache + out\n\t\t\t}\n\t\t\t// position: sticky\n\t\t\tcase 1017: {\n\t\t\t\tif (out.indexOf('sticky', 9) === -1) {\n\t\t\t\t\treturn out\n\t\t\t\t}\n\t\t\t}\n\t\t\t// display(flex/inline-flex/inline-box): d, i, s\n\t\t\tcase 975: {\n\t\t\t\tindex = (out = input).length - 10\n\t\t\t\tcache = (out.charCodeAt(index) === 33 ? out.substring(0, index) : out).substring(input.indexOf(':', 7) + 1).trim()\n\n\t\t\t\tswitch (hash = cache.charCodeAt(0) + (cache.charCodeAt(7)|0)) {\n\t\t\t\t\t// inline-\n\t\t\t\t\tcase 203: {\n\t\t\t\t\t\t// inline-box\n\t\t\t\t\t\tif (cache.charCodeAt(8) < 111) {\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// inline-box/sticky\n\t\t\t\t\tcase 115: {\n\t\t\t\t\t\tout = out.replace(cache, webkit+cache)+';'+out\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t\t// inline-flex\n\t\t\t\t\t// flex\n\t\t\t\t\tcase 207:\n\t\t\t\t\tcase 102: {\n\t\t\t\t\t\tout = (\n\t\t\t\t\t\t\tout.replace(cache, webkit+(hash > 102 ? 'inline-' : '')+'box')+';'+\n\t\t\t\t\t\t\tout.replace(cache, webkit+cache)+';'+\n\t\t\t\t\t\t\tout.replace(cache, ms+cache+'box')+';'+\n\t\t\t\t\t\t\tout\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn out + ';'\n\t\t\t}\n\t\t\t// align-items, align-center, align-self: a, l, i, -\n\t\t\tcase 938: {\n\t\t\t\tif (out.charCodeAt(5) === DASH) {\n\t\t\t\t\tswitch (out.charCodeAt(6)) {\n\t\t\t\t\t\t// align-items, i\n\t\t\t\t\t\tcase 105: {\n\t\t\t\t\t\t\tcache = out.replace('-items', '')\n\t\t\t\t\t\t\treturn webkit + out + webkit + 'box-' + cache + ms + 'flex-' + cache + out\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// align-self, s\n\t\t\t\t\t\tcase 115: {\n\t\t\t\t\t\t\treturn webkit + out + ms + 'flex-item-' + out.replace(selfptn, '') + out\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// align-content\n\t\t\t\t\t\tdefault: {\n\t\t\t\t\t\t\treturn webkit + out + ms + 'flex-line-pack' + out.replace('align-content', '').replace(selfptn, '') + out\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak\n\t\t\t}\n\t\t\t// min/max\n\t\t\tcase 973:\n\t\t\tcase 989: {\n\t\t\t\t// min-/max- height/width/block-size/inline-size\n\t\t\t\tif (out.charCodeAt(3) !== DASH || out.charCodeAt(4) === 122) {\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t\t// height/width: min-content / width: max-content\n\t\t\tcase 931:\n\t\t\tcase 953: {\n\t\t\t\tif (dimensionptn.test(input) === true) {\n\t\t\t\t\t// stretch\n\t\t\t\t\tif ((cache = input.substring(input.indexOf(':') + 1)).charCodeAt(0) === 115)\n\t\t\t\t\t\treturn property(input.replace('stretch', 'fill-available'), first, second, third).replace(':fill-available', ':stretch')\n\t\t\t\t\telse\n\t\t\t\t\t\treturn out.replace(cache, webkit + cache) + out.replace(cache, moz + cache.replace('fill-', '')) + out\n\t\t\t\t}\n\t\t\t\tbreak\n\t\t\t}\n\t\t\t// transform, transition: t, r, a\n\t\t\tcase 962: {\n\t\t\t\tout = webkit + out + (out.charCodeAt(5) === 102 ? ms + out : '') + out\n\n\t\t\t\t// transitions\n\t\t\t\tif (second + third === 211 && out.charCodeAt(13) === 105 && out.indexOf('transform', 10) > 0) {\n\t\t\t\t\treturn out.substring(0, out.indexOf(';', 27) + 1).replace(transformptn, '$1' + webkit + '$2') + out\n\t\t\t\t}\n\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\n\t\treturn out\n\t}\n\n\t/**\n\t * Vendor\n\t *\n\t * @param {string} content\n\t * @param {number} context\n\t * @return {boolean}\n\t */\n\tfunction vendor (content, context) {\n\t\tvar index = content.indexOf(context === 1 ? ':' : '{')\n\t\tvar key = content.substring(0, context !== 3 ? index : 10)\n\t\tvar value = content.substring(index + 1, content.length - 1)\n\n\t\treturn should(context !== 2 ? key : key.replace(pseudofmt, '$1'), value, context)\n\t}\n\n\t/**\n\t * Supports\n\t *\n\t * @param {string} match\n\t * @param {string} group\n\t * @return {string}\n\t */\n\tfunction supports (match, group) {\n\t\tvar out = property(group, group.charCodeAt(0), group.charCodeAt(1), group.charCodeAt(2))\n\n\t\treturn out !== group+';' ? out.replace(propertyptn, ' or ($1)').substring(4) : '('+group+')'\n\t}\n\n\t/**\n\t * Animation\n\t *\n\t * @param {string} input\n\t * @return {string}\n\t */\n\tfunction animation (input) {\n\t\tvar length = input.length\n\t\tvar index = input.indexOf(':', 9) + 1\n\t\tvar declare = input.substring(0, index).trim()\n\t\tvar out = input.substring(index, length-1).trim()\n\n\t\tswitch (input.charCodeAt(9)*keyed) {\n\t\t\tcase 0: {\n\t\t\t\tbreak\n\t\t\t}\n\t\t\t// animation-*, -\n\t\t\tcase DASH: {\n\t\t\t\t// animation-name, n\n\t\t\t\tif (input.charCodeAt(10) !== 110) {\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t\t// animation/animation-name\n\t\t\tdefault: {\n\t\t\t\t// split in case of multiple animations\n\t\t\t\tvar list = out.split((out = '', animationptn))\n\n\t\t\t\tfor (var i = 0, index = 0, length = list.length; i < length; index = 0, ++i) {\n\t\t\t\t\tvar value = list[i]\n\t\t\t\t\tvar items = value.split(propertiesptn)\n\n\t\t\t\t\twhile (value = items[index]) {\n\t\t\t\t\t\tvar peak = value.charCodeAt(0)\n\n\t\t\t\t\t\tif (keyed === 1 && (\n\t\t\t\t\t\t\t// letters\n\t\t\t\t\t\t\t(peak > AT && peak < 90) || (peak > 96 && peak < 123) || peak === UNDERSCORE ||\n\t\t\t\t\t\t\t// dash but not in sequence i.e --\n\t\t\t\t\t\t\t(peak === DASH && value.charCodeAt(1) !== DASH)\n\t\t\t\t\t\t)) {\n\t\t\t\t\t\t\t// not a number/function\n\t\t\t\t\t\t\tswitch (isNaN(parseFloat(value)) + (value.indexOf('(') !== -1)) {\n\t\t\t\t\t\t\t\tcase 1: {\n\t\t\t\t\t\t\t\t\tswitch (value) {\n\t\t\t\t\t\t\t\t\t\t// not a valid reserved keyword\n\t\t\t\t\t\t\t\t\t\tcase 'infinite': case 'alternate': case 'backwards': case 'running':\n\t\t\t\t\t\t\t\t\t\tcase 'normal': case 'forwards': case 'both': case 'none': case 'linear':\n\t\t\t\t\t\t\t\t\t\tcase 'ease': case 'ease-in': case 'ease-out': case 'ease-in-out':\n\t\t\t\t\t\t\t\t\t\tcase 'paused': case 'reverse': case 'alternate-reverse': case 'inherit':\n\t\t\t\t\t\t\t\t\t\tcase 'initial': case 'unset': case 'step-start': case 'step-end': {\n\t\t\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tdefault: {\n\t\t\t\t\t\t\t\t\t\t\tvalue += key\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\titems[index++] = value\n\t\t\t\t\t}\n\n\t\t\t\t\tout += (i === 0 ? '' : ',') + items.join(' ')\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tout = declare + out + ';'\n\n\t\tif (prefix === 1 || (prefix === 2 && vendor(out, 1)))\n\t\t\treturn webkit + out + out\n\n\t\treturn out\n\t}\n\n\t/**\n\t * Isolate\n\t *\n\t * @param {Array<string>} current\n\t */\n\tfunction isolate (current) {\n\t\tfor (var i = 0, length = current.length, selector = Array(length), padding, element; i < length; ++i) {\n\t\t\t// split individual elements in a selector i.e h1 h2 === [h1, h2]\n\t\t\tvar elements = current[i].split(elementptn)\n\t\t\tvar out = ''\n\n\t\t\tfor (var j = 0, size = 0, tail = 0, code = 0, l = elements.length; j < l; ++j) {\n\t\t\t\t// empty element\n\t\t\t\tif ((size = (element = elements[j]).length) === 0 && l > 1) {\n\t\t\t\t\tcontinue\n\t\t\t\t}\n\n\t\t\t\ttail = out.charCodeAt(out.length-1)\n\t\t\t\tcode = element.charCodeAt(0)\n\t\t\t\tpadding = ''\n\n\t\t\t\tif (j !== 0) {\n\t\t\t\t\t// determine if we need padding\n\t\t\t\t\tswitch (tail) {\n\t\t\t\t\t\tcase STAR:\n\t\t\t\t\t\tcase TILDE:\n\t\t\t\t\t\tcase GREATERTHAN:\n\t\t\t\t\t\tcase PLUS:\n\t\t\t\t\t\tcase SPACE:\n\t\t\t\t\t\tcase OPENPARENTHESES:  {\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdefault: {\n\t\t\t\t\t\t\tpadding = ' '\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tswitch (code) {\n\t\t\t\t\tcase AND: {\n\t\t\t\t\t\telement = padding + nscopealt\n\t\t\t\t\t}\n\t\t\t\t\tcase TILDE:\n\t\t\t\t\tcase GREATERTHAN:\n\t\t\t\t\tcase PLUS:\n\t\t\t\t\tcase SPACE:\n\t\t\t\t\tcase CLOSEPARENTHESES:\n\t\t\t\t\tcase OPENPARENTHESES: {\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t\tcase OPENBRACKET: {\n\t\t\t\t\t\telement = padding + element + nscopealt\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t\tcase COLON: {\n\t\t\t\t\t\tswitch (element.charCodeAt(1)*2 + element.charCodeAt(2)*3) {\n\t\t\t\t\t\t\t// :global\n\t\t\t\t\t\t\tcase 530: {\n\t\t\t\t\t\t\t\tif (escape > 0) {\n\t\t\t\t\t\t\t\t\telement = padding + element.substring(8, size - 1)\n\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// :hover, :nth-child(), ...\n\t\t\t\t\t\t\tdefault: {\n\t\t\t\t\t\t\t\tif (j < 1 || elements[j-1].length < 1) {\n\t\t\t\t\t\t\t\t\telement = padding + nscopealt + element\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t\tcase COMMA: {\n\t\t\t\t\t\tpadding = ''\n\t\t\t\t\t}\n\t\t\t\t\tdefault: {\n\t\t\t\t\t\tif (size > 1 && element.indexOf(':') > 0) {\n\t\t\t\t\t\t\telement = padding + element.replace(pseudoptn, '$1' + nscopealt + '$2')\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\telement = padding + element + nscopealt\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tout += element\n\t\t\t}\n\n\t\t\tselector[i] = out.replace(formatptn, '').trim()\n\t\t}\n\n\t\treturn selector\n\t}\n\n\t/**\n\t * Proxy\n\t *\n\t * @param {number} context\n\t * @param {string} content\n\t * @param {Array<string>} selectors\n\t * @param {Array<string>} parents\n\t * @param {number} line\n\t * @param {number} column\n\t * @param {number} length\n\t * @param {number} id\n\t * @param {number} depth\n\t * @param {number} at\n\t * @return {(string|void|*)}\n\t */\n\tfunction proxy (context, content, selectors, parents, line, column, length, id, depth, at) {\n\t\tfor (var i = 0, out = content, next; i < plugged; ++i) {\n\t\t\tswitch (next = plugins[i].call(stylis, context, out, selectors, parents, line, column, length, id, depth, at)) {\n\t\t\t\tcase void 0:\n\t\t\t\tcase false:\n\t\t\t\tcase true:\n\t\t\t\tcase null: {\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t\tdefault: {\n\t\t\t\t\tout = next\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (out !== content) {\n\t\t  return out\n\t\t}\n\t}\n\n\t/**\n\t * @param {number} code\n\t * @param {number} index\n\t * @param {number} length\n\t * @param {string} body\n\t * @return {number}\n\t */\n\tfunction delimited (code, index, length, body) {\n\t\tfor (var i = index + 1; i < length; ++i) {\n\t\t\tswitch (body.charCodeAt(i)) {\n\t\t\t\t// /*\n\t\t\t\tcase FOWARDSLASH: {\n\t\t\t\t\tif (code === STAR) {\n\t\t\t\t\t\tif (body.charCodeAt(i - 1) === STAR &&  index + 2 !== i) {\n\t\t\t\t\t\t\treturn i + 1\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t\t// //\n\t\t\t\tcase NEWLINE: {\n\t\t\t\t\tif (code === FOWARDSLASH) {\n\t\t\t\t\t\treturn i + 1\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn i\n\t}\n\n\t/**\n\t * @param {number} type\n\t * @param {number} index\n\t * @param {number} length\n\t * @param {number} find\n\t * @param {string} body\n\t * @return {number}\n\t */\n\tfunction match (type, index, length, body) {\n\t\tfor (var i = index + 1; i < length; ++i) {\n\t\t\tswitch (body.charCodeAt(i)) {\n\t\t\t\tcase type: {\n\t\t\t\t\treturn i\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn i\n\t}\n\n\t/**\n\t * Minify\n\t *\n\t * @param {(string|*)} output\n\t * @return {string}\n\t */\n\tfunction minify (output) {\n\t\treturn output\n\t\t\t.replace(formatptn, '')\n\t\t\t.replace(beforeptn, '')\n\t\t\t.replace(afterptn, '$1')\n\t\t\t.replace(tailptn, '$1')\n\t\t\t.replace(whiteptn, ' ')\n\t}\n\n\t/**\n\t * Use\n\t *\n\t * @param {(Array<function(...?)>|function(...?)|number|void)?} plugin\n\t */\n\tfunction use (plugin) {\n\t\tswitch (plugin) {\n\t\t\tcase void 0:\n\t\t\tcase null: {\n\t\t\t\tplugged = plugins.length = 0\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\tif (typeof plugin === 'function') {\n\t\t\t\t\tplugins[plugged++] = plugin\n\t\t\t\t}\telse if (typeof plugin === 'object') {\n\t\t\t\t\tfor (var i = 0, length = plugin.length; i < length; ++i) {\n\t\t\t\t\t\tuse(plugin[i])\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tunkwn = !!plugin|0\n\t\t\t\t}\n\t\t\t}\n \t\t}\n\n \t\treturn use\n\t}\n\n\t/**\n\t * Set\n\t *\n\t * @param {*} options\n\t */\n\tfunction set (options) {\n\t\tfor (var name in options) {\n\t\t\tvar value = options[name]\n\t\t\tswitch (name) {\n\t\t\t\tcase 'keyframe': keyed = value|0; break\n\t\t\t\tcase 'global': escape = value|0; break\n\t\t\t\tcase 'cascade': cascade = value|0; break\n\t\t\t\tcase 'compress': compress = value|0; break\n\t\t\t\tcase 'semicolon': semicolon = value|0; break\n\t\t\t\tcase 'preserve': preserve = value|0; break\n\t\t\t\tcase 'prefix':\n\t\t\t\t\tshould = null\n\n\t\t\t\t\tif (!value) {\n\t\t\t\t\t\tprefix = 0\n\t\t\t\t\t} else if (typeof value !== 'function') {\n\t\t\t\t\t\tprefix = 1\n\t\t\t\t\t} else {\n\t\t\t\t\t\tprefix = 2\n\t\t\t\t\t\tshould = value\n\t\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn set\n\t}\n\n\t/**\n\t * Stylis\n\t *\n\t * @param {string} selector\n\t * @param {string} input\n\t * @return {*}\n\t */\n\tfunction stylis (selector, input) {\n\t\tif (this !== void 0 && this.constructor === stylis) {\n\t\t\treturn factory(selector)\n\t\t}\n\n\t\t// setup\n\t\tvar ns = selector\n\t\tvar code = ns.charCodeAt(0)\n\n\t\t// trim leading whitespace\n\t\tif (code < 33) {\n\t\t\tcode = (ns = ns.trim()).charCodeAt(0)\n\t\t}\n\n\t\t// keyframe/animation namespace\n\t\tif (keyed > 0) {\n\t\t\tkey = ns.replace(invalidptn, code === OPENBRACKET ? '' : '-')\n\t\t}\n\n\t\t// reset, used to assert if a plugin is moneky-patching the return value\n\t\tcode = 1\n\n\t\t// cascade/isolate\n\t\tif (cascade === 1) {\n\t\t\tnscope = ns\n\t\t} else {\n\t\t\tnscopealt = ns\n\t\t}\n\n\t\tvar selectors = [nscope]\n\t\tvar result\n\n\t\t// execute plugins, pre-process context\n\t\tif (plugged > 0) {\n\t\t\tresult = proxy(PREPS, input, selectors, selectors, line, column, 0, 0, 0, 0)\n\n\t\t\tif (result !== void 0 && typeof result === 'string') {\n\t\t\t\tinput = result\n\t\t\t}\n\t\t}\n\n\t\t// build\n\t\tvar output = compile(array, selectors, input, 0, 0)\n\n\t\t// execute plugins, post-process context\n\t\tif (plugged > 0) {\n\t\t\tresult = proxy(POSTS, output, selectors, selectors, line, column, output.length, 0, 0, 0)\n\n\t\t\t// bypass minification\n\t\t\tif (result !== void 0 && typeof(output = result) !== 'string') {\n\t\t\t\tcode = 0\n\t\t\t}\n\t\t}\n\n\t\t// reset\n\t\tkey = ''\n\t\tnscope = ''\n\t\tnscopealt = ''\n\t\tpattern = 0\n\t\tline = 1\n\t\tcolumn = 1\n\n\t\treturn compress*code === 0 ? output : minify(output)\n\t}\n\n\tstylis['use'] = use\n\tstylis['set'] = set\n\n\tif (options !== void 0) {\n\t\tset(options)\n\t}\n\n\treturn stylis\n}));\n","\r\rimport stylis from 'stylis';\r// stylis minify CSS and add vendor prefixes\r\rexport function processStyle(key, rules) {\r\r  if (key) return stylis(`.${key}`, rules);\r\r  // Inline styles does not need the class selector\r  const out = stylis('', rules);\r  return out.substr(1, out.length - 2);\r\r\r}\r","\rimport { processStyle } from './processStyle';\r\rexport function getClasses(registerNumber, componentDefClasses = {}) {\r\r  const classKeys = Object.keys(componentDefClasses);\r  const mapping = {};\r\r  const rules = classKeys.reduce((acum, key) => {\r    const newClassName = `${key}--${registerNumber}`;\r    mapping[key] = newClassName;\r    return `${acum}${processStyle(newClassName, componentDefClasses[key])}`;\r  }, '');\r\r\r  return {\r    rules,\r    mapping,\r  };\r\r}\r\r","\rimport { processStyle } from './processStyle';\r\rexport function getStyles(componentStyles = {}) {\r\r  const styleKeys = Object.keys(componentStyles);\r\r  // Return only inlineStyles to be attached to the component\r  return styleKeys.reduce((acum, key) => {\r    const isFunction = typeof componentStyles[key] === 'function';\r    return {\r      ...acum,\r      [key]: isFunction\r        ? (...args) => processStyle(null, componentStyles[key](...args))\r        : processStyle(null, componentStyles[key]),\r    };\r  }, {});\r\r}\r","\r\rimport { registerStyles } from './registerStyles';\rimport { getClasses } from './getClasses';\rimport { getStyles } from './getStyles';\r\r\rexport default {\r\r  registerStyles,\r  getClasses,\r  getStyles,\r\r};\r","\r\rexport function getFinalProps(args) {\r\r  const {\r    client,\r    store,\r    componentDef,\r    classesMapping,\r    processedStyles,\r  } = args;\r\r  const {\r    state = () => ({}),\r    actions = () => ({}),\r  } = componentDef;\r\r  const classes = {\r    ...Object.keys(classesMapping).reduce((acum, key) => {\r      return { ...acum, [key]: classesMapping[key] };\r    }, {}),\r  };\r\r  const sections = {\r    ...Object.keys(componentDef.sections || {}).reduce((acum, key) => {\r      return {\r        ...acum,\r        [key]: componentDef.sections[key](client),\r      };\r    }, {}),\r  };\r\r  return (props = {}) => {\r\r    return {\r      props,\r      state: state(props, store),\r      actions: actions(props, store),\r      styles: processedStyles,\r      classes,\r      sections,\r    };\r\r  };\r\r}\r\r","\r\rexport function getStore(Store, registerNumber) {\r\r  return {\r    alerts: Store.objects.alerts,\r    check: Store.methods.check,\r    toggle: Store.methods.toggle,\r    measure: Store.utils.measure,\r    set: Store.methods.set,\r    setItem: Store.methods.setItem,\r    call: Store.process.call,\r    get: Store.methods.get(registerNumber),\r    db: Store.db ? Store.db.query : () => undefined,\r  };\r\r}\r\r","\rimport styles from '../../styles';\r\rimport { getFinalProps } from './getFinalProps';\rimport { getStore } from './getStore';\r\rexport default (Store, client) => componentDef => {\r\r  const registerNumber = Store.methods.registerComponent(componentDef);\r  const processedClasses = styles.getClasses(registerNumber, componentDef.classes);\r  // Provoque Side Effect for classes styles\r  styles.registerStyles(registerNumber, processedClasses.rules);\r\r  const store = getStore(Store, registerNumber);\r  const processedStyles = styles.getStyles(componentDef.styles);\r\r  const solveProps = getFinalProps({\r    client,\r    store,\r    componentDef,\r    classesMapping: processedClasses.mapping || {},\r    processedStyles,\r  });\r\r\r  return function renderComponent(props, children) {\r\r\r    // Called on inital render and every update\r    const render = () => {\r      const finalProps = solveProps(props);\r      const rendered = componentDef.render(finalProps, children);\r      return rendered;\r    };\r\r    // console.log('-------------------', component);\r    const rendered = render();\r\r    return rendered;\r\r  };\r\r};\r","\r\rimport createCustomHoc from './custom/create';\r\rexport function createHoc(Store, client) {\r\r  return createCustomHoc(Store, client);\r\r}\r\r","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {Part} from './part.js';\n\nconst directives = new WeakMap<any, Boolean>();\n\nexport type DirectiveFn = (part: Part) => void;\n\n/**\n * Brands a function as a directive so that lit-html will call the function\n * during template rendering, rather than passing as a value.\n *\n * @param f The directive factory function. Must be a function that returns a\n * function of the signature `(part: Part) => void`. The returned function will\n * be called with the part object\n *\n * @example\n *\n * ```\n * import {directive, html} from 'lit-html';\n *\n * const immutable = directive((v) => (part) => {\n *   if (part.value !== v) {\n *     part.setValue(v)\n *   }\n * });\n * ```\n */\nexport const directive = <F extends Function>(f: F): F =>\n    ((...args: any[]) => {\n      const d = f(...args);\n      directives.set(d, true);\n      return d;\n    }) as unknown as F;\n\nexport const isDirective = (o: any) =>\n    typeof o === 'function' && directives.has(o);\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\n/**\n * True if the custom elements polyfill is in use.\n */\nexport const isCEPolyfill = window.customElements !== undefined &&\n    (window.customElements as any).polyfillWrapFlushCallback !== undefined;\n\n/**\n * Reparents nodes, starting from `startNode` (inclusive) to `endNode`\n * (exclusive), into another container (could be the same container), before\n * `beforeNode`. If `beforeNode` is null, it appends the nodes to the\n * container.\n */\nexport const reparentNodes =\n    (container: Node,\n     start: Node|null,\n     end: Node|null = null,\n     before: Node|null = null): void => {\n      let node = start;\n      while (node !== end) {\n        const n = node!.nextSibling;\n        container.insertBefore(node!, before as Node);\n        node = n;\n      }\n    };\n\n/**\n * Removes nodes, starting from `startNode` (inclusive) to `endNode`\n * (exclusive), from `container`.\n */\nexport const removeNodes =\n    (container: Node, startNode: Node|null, endNode: Node|null = null):\n        void => {\n          let node = startNode;\n          while (node !== endNode) {\n            const n = node!.nextSibling;\n            container.removeChild(node!);\n            node = n;\n          }\n        };\n","/**\n * @license\n * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\n/**\n * The Part interface represents a dynamic part of a template instance rendered\n * by lit-html.\n */\nexport interface Part {\n  value: any;\n\n  /**\n   * Sets the current part value, but does not write it to the DOM.\n   * @param value The value that will be committed.\n   */\n  setValue(value: any): void;\n\n  /**\n   * Commits the current part value, cause it to actually be written to the DOM.\n   */\n  commit(): void;\n}\n\n/**\n * A sentinel value that signals that a value was handled by a directive and\n * should not be written to the DOM.\n */\nexport const noChange = {};\n\n/**\n * A sentinel value that signals a NodePart to fully clear its content.\n */\nexport const nothing = {};\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {TemplateResult} from './template-result.js';\n\n/**\n * An expression marker with embedded unique key to avoid collision with\n * possible text in templates.\n */\nexport const marker = `{{lit-${String(Math.random()).slice(2)}}}`;\n\n/**\n * An expression marker used text-positions, multi-binding attributes, and\n * attributes with markup-like text values.\n */\nexport const nodeMarker = `<!--${marker}-->`;\n\nexport const markerRegex = new RegExp(`${marker}|${nodeMarker}`);\n\n/**\n * Suffix appended to all bound attribute names.\n */\nexport const boundAttributeSuffix = '$lit$';\n\n/**\n * An updateable Template that tracks the location of dynamic parts.\n */\nexport class Template {\n  parts: TemplatePart[] = [];\n  element: HTMLTemplateElement;\n\n  constructor(result: TemplateResult, element: HTMLTemplateElement) {\n    this.element = element;\n    let index = -1;\n    let partIndex = 0;\n    const nodesToRemove: Node[] = [];\n    const _prepareTemplate = (template: HTMLTemplateElement) => {\n      const content = template.content;\n      // Edge needs all 4 parameters present; IE11 needs 3rd parameter to be\n      // null\n      const walker = document.createTreeWalker(\n          content,\n          133 /* NodeFilter.SHOW_{ELEMENT|COMMENT|TEXT} */,\n          null as any,\n          false);\n      // Keeps track of the last index associated with a part. We try to delete\n      // unnecessary nodes, but we never want to associate two different parts\n      // to the same index. They must have a constant node between.\n      let lastPartIndex = 0;\n      while (walker.nextNode()) {\n        index++;\n        const node = walker.currentNode as Element | Comment | Text;\n        if (node.nodeType === 1 /* Node.ELEMENT_NODE */) {\n          if ((node as Element).hasAttributes()) {\n            const attributes = (node as Element).attributes;\n            // Per\n            // https://developer.mozilla.org/en-US/docs/Web/API/NamedNodeMap,\n            // attributes are not guaranteed to be returned in document order.\n            // In particular, Edge/IE can return them out of order, so we cannot\n            // assume a correspondance between part index and attribute index.\n            let count = 0;\n            for (let i = 0; i < attributes.length; i++) {\n              if (attributes[i].value.indexOf(marker) >= 0) {\n                count++;\n              }\n            }\n            while (count-- > 0) {\n              // Get the template literal section leading up to the first\n              // expression in this attribute\n              const stringForPart = result.strings[partIndex];\n              // Find the attribute name\n              const name = lastAttributeNameRegex.exec(stringForPart)![2];\n              // Find the corresponding attribute\n              // All bound attributes have had a suffix added in\n              // TemplateResult#getHTML to opt out of special attribute\n              // handling. To look up the attribute value we also need to add\n              // the suffix.\n              const attributeLookupName =\n                  name.toLowerCase() + boundAttributeSuffix;\n              const attributeValue =\n                  (node as Element).getAttribute(attributeLookupName)!;\n              const strings = attributeValue.split(markerRegex);\n              this.parts.push({type: 'attribute', index, name, strings});\n              (node as Element).removeAttribute(attributeLookupName);\n              partIndex += strings.length - 1;\n            }\n          }\n          if ((node as Element).tagName === 'TEMPLATE') {\n            _prepareTemplate(node as HTMLTemplateElement);\n          }\n        } else if (node.nodeType === 3 /* Node.TEXT_NODE */) {\n          const data = (node as Text).data!;\n          if (data.indexOf(marker) >= 0) {\n            const parent = node.parentNode!;\n            const strings = data.split(markerRegex);\n            const lastIndex = strings.length - 1;\n            // Generate a new text node for each literal section\n            // These nodes are also used as the markers for node parts\n            for (let i = 0; i < lastIndex; i++) {\n              parent.insertBefore(\n                  (strings[i] === '') ? createMarker() :\n                                        document.createTextNode(strings[i]),\n                  node);\n              this.parts.push({type: 'node', index: ++index});\n            }\n            // If there's no text, we must insert a comment to mark our place.\n            // Else, we can trust it will stick around after cloning.\n            if (strings[lastIndex] === '') {\n              parent.insertBefore(createMarker(), node);\n              nodesToRemove.push(node);\n            } else {\n              (node as Text).data = strings[lastIndex];\n            }\n            // We have a part for each match found\n            partIndex += lastIndex;\n          }\n        } else if (node.nodeType === 8 /* Node.COMMENT_NODE */) {\n          if ((node as Comment).data === marker) {\n            const parent = node.parentNode!;\n            // Add a new marker node to be the startNode of the Part if any of\n            // the following are true:\n            //  * We don't have a previousSibling\n            //  * The previousSibling is already the start of a previous part\n            if (node.previousSibling === null || index === lastPartIndex) {\n              index++;\n              parent.insertBefore(createMarker(), node);\n            }\n            lastPartIndex = index;\n            this.parts.push({type: 'node', index});\n            // If we don't have a nextSibling, keep this node so we have an end.\n            // Else, we can remove it to save future costs.\n            if (node.nextSibling === null) {\n              (node as Comment).data = '';\n            } else {\n              nodesToRemove.push(node);\n              index--;\n            }\n            partIndex++;\n          } else {\n            let i = -1;\n            while ((i = (node as Comment).data!.indexOf(marker, i + 1)) !==\n                   -1) {\n              // Comment node has a binding marker inside, make an inactive part\n              // The binding won't work, but subsequent bindings will\n              // TODO (justinfagnani): consider whether it's even worth it to\n              // make bindings in comments work\n              this.parts.push({type: 'node', index: -1});\n            }\n          }\n        }\n      }\n    };\n    _prepareTemplate(element);\n    // Remove text binding nodes after the walk to not disturb the TreeWalker\n    for (const n of nodesToRemove) {\n      n.parentNode!.removeChild(n);\n    }\n  }\n}\n\n/**\n * A placeholder for a dynamic expression in an HTML template.\n *\n * There are two built-in part types: AttributePart and NodePart. NodeParts\n * always represent a single dynamic expression, while AttributeParts may\n * represent as many expressions are contained in the attribute.\n *\n * A Template's parts are mutable, so parts can be replaced or modified\n * (possibly to implement different template semantics). The contract is that\n * parts can only be replaced, not removed, added or reordered, and parts must\n * always consume the correct number of values in their `update()` method.\n *\n * TODO(justinfagnani): That requirement is a little fragile. A\n * TemplateInstance could instead be more careful about which values it gives\n * to Part.update().\n */\nexport type TemplatePart = {\n  type: 'node',\n  index: number\n}|{type: 'attribute', index: number, name: string, strings: string[]};\n\nexport const isTemplatePartActive = (part: TemplatePart) => part.index !== -1;\n\n// Allows `document.createComment('')` to be renamed for a\n// small manual size-savings.\nexport const createMarker = () => document.createComment('');\n\n/**\n * This regex extracts the attribute name preceding an attribute-position\n * expression. It does this by matching the syntax allowed for attributes\n * against the string literal directly preceding the expression, assuming that\n * the expression is in an attribute-value position.\n *\n * See attributes in the HTML spec:\n * https://www.w3.org/TR/html5/syntax.html#attributes-0\n *\n * \"\\0-\\x1F\\x7F-\\x9F\" are Unicode control characters\n *\n * \" \\x09\\x0a\\x0c\\x0d\" are HTML space characters:\n * https://www.w3.org/TR/html5/infrastructure.html#space-character\n *\n * So an attribute is:\n *  * The name: any character except a control character, space character, ('),\n *    (\"), \">\", \"=\", or \"/\"\n *  * Followed by zero or more space characters\n *  * Followed by \"=\"\n *  * Followed by zero or more space characters\n *  * Followed by:\n *    * Any character except space, ('), (\"), \"<\", \">\", \"=\", (`), or\n *    * (\") then any non-(\"), or\n *    * (') then any non-(')\n */\nexport const lastAttributeNameRegex =\n    /([ \\x09\\x0a\\x0c\\x0d])([^\\0-\\x1F\\x7F-\\x9F \\x09\\x0a\\x0c\\x0d\"'>=/]+)([ \\x09\\x0a\\x0c\\x0d]*=[ \\x09\\x0a\\x0c\\x0d]*(?:[^ \\x09\\x0a\\x0c\\x0d\"'`<>=]*|\"[^\"]*|'[^']*))$/;\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {isCEPolyfill} from './dom.js';\nimport {Part} from './part.js';\nimport {RenderOptions} from './render-options.js';\nimport {TemplateProcessor} from './template-processor.js';\nimport {isTemplatePartActive, Template} from './template.js';\n\n/**\n * An instance of a `Template` that can be attached to the DOM and updated\n * with new values.\n */\nexport class TemplateInstance {\n  _parts: Array<Part|undefined> = [];\n  processor: TemplateProcessor;\n  options: RenderOptions;\n  template: Template;\n\n  constructor(\n      template: Template, processor: TemplateProcessor,\n      options: RenderOptions) {\n    this.template = template;\n    this.processor = processor;\n    this.options = options;\n  }\n\n  update(values: any[]) {\n    let i = 0;\n    for (const part of this._parts) {\n      if (part !== undefined) {\n        part.setValue(values[i]);\n      }\n      i++;\n    }\n    for (const part of this._parts) {\n      if (part !== undefined) {\n        part.commit();\n      }\n    }\n  }\n\n  _clone(): DocumentFragment {\n    // When using the Custom Elements polyfill, clone the node, rather than\n    // importing it, to keep the fragment in the template's document. This\n    // leaves the fragment inert so custom elements won't upgrade and\n    // potentially modify their contents by creating a polyfilled ShadowRoot\n    // while we traverse the tree.\n    const fragment = isCEPolyfill ?\n        this.template.element.content.cloneNode(true) as DocumentFragment :\n        document.importNode(this.template.element.content, true);\n\n    const parts = this.template.parts;\n    let partIndex = 0;\n    let nodeIndex = 0;\n    const _prepareInstance = (fragment: DocumentFragment) => {\n      // Edge needs all 4 parameters present; IE11 needs 3rd parameter to be\n      // null\n      const walker = document.createTreeWalker(\n          fragment,\n          133 /* NodeFilter.SHOW_{ELEMENT|COMMENT|TEXT} */,\n          null as any,\n          false);\n      let node = walker.nextNode();\n      // Loop through all the nodes and parts of a template\n      while (partIndex < parts.length && node !== null) {\n        const part = parts[partIndex];\n        // Consecutive Parts may have the same node index, in the case of\n        // multiple bound attributes on an element. So each iteration we either\n        // increment the nodeIndex, if we aren't on a node with a part, or the\n        // partIndex if we are. By not incrementing the nodeIndex when we find a\n        // part, we allow for the next part to be associated with the current\n        // node if neccessasry.\n        if (!isTemplatePartActive(part)) {\n          this._parts.push(undefined);\n          partIndex++;\n        } else if (nodeIndex === part.index) {\n          if (part.type === 'node') {\n            const part = this.processor.handleTextExpression(this.options);\n            part.insertAfterNode(node.previousSibling!);\n            this._parts.push(part);\n          } else {\n            this._parts.push(...this.processor.handleAttributeExpressions(\n                node as Element, part.name, part.strings, this.options));\n          }\n          partIndex++;\n        } else {\n          nodeIndex++;\n          if (node.nodeName === 'TEMPLATE') {\n            _prepareInstance((node as HTMLTemplateElement).content);\n          }\n          node = walker.nextNode();\n        }\n      }\n    };\n    _prepareInstance(fragment);\n    if (isCEPolyfill) {\n      document.adoptNode(fragment);\n      customElements.upgrade(fragment);\n    }\n    return fragment;\n  }\n}\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {reparentNodes} from './dom.js';\nimport {TemplateProcessor} from './template-processor.js';\nimport {boundAttributeSuffix, lastAttributeNameRegex, marker, nodeMarker} from './template.js';\n\n/**\n * The return type of `html`, which holds a Template and the values from\n * interpolated expressions.\n */\nexport class TemplateResult {\n  strings: TemplateStringsArray;\n  values: any[];\n  type: string;\n  processor: TemplateProcessor;\n\n  constructor(\n      strings: TemplateStringsArray, values: any[], type: string,\n      processor: TemplateProcessor) {\n    this.strings = strings;\n    this.values = values;\n    this.type = type;\n    this.processor = processor;\n  }\n\n  /**\n   * Returns a string of HTML used to create a `<template>` element.\n   */\n  getHTML(): string {\n    const endIndex = this.strings.length - 1;\n    let html = '';\n    for (let i = 0; i < endIndex; i++) {\n      const s = this.strings[i];\n      // This exec() call does two things:\n      // 1) Appends a suffix to the bound attribute name to opt out of special\n      // attribute value parsing that IE11 and Edge do, like for style and\n      // many SVG attributes. The Template class also appends the same suffix\n      // when looking up attributes to create Parts.\n      // 2) Adds an unquoted-attribute-safe marker for the first expression in\n      // an attribute. Subsequent attribute expressions will use node markers,\n      // and this is safe since attributes with multiple expressions are\n      // guaranteed to be quoted.\n      const match = lastAttributeNameRegex.exec(s);\n      if (match) {\n        // We're starting a new bound attribute.\n        // Add the safe attribute suffix, and use unquoted-attribute-safe\n        // marker.\n        html += s.substr(0, match.index) + match[1] + match[2] +\n            boundAttributeSuffix + match[3] + marker;\n      } else {\n        // We're either in a bound node, or trailing bound attribute.\n        // Either way, nodeMarker is safe to use.\n        html += s + nodeMarker;\n      }\n    }\n    return html + this.strings[endIndex];\n  }\n\n  getTemplateElement(): HTMLTemplateElement {\n    const template = document.createElement('template');\n    template.innerHTML = this.getHTML();\n    return template;\n  }\n}\n\n/**\n * A TemplateResult for SVG fragments.\n *\n * This class wraps HTMl in an `<svg>` tag in order to parse its contents in the\n * SVG namespace, then modifies the template to remove the `<svg>` tag so that\n * clones only container the original fragment.\n */\nexport class SVGTemplateResult extends TemplateResult {\n  getHTML(): string {\n    return `<svg>${super.getHTML()}</svg>`;\n  }\n\n  getTemplateElement(): HTMLTemplateElement {\n    const template = super.getTemplateElement();\n    const content = template.content;\n    const svgElement = content.firstChild!;\n    content.removeChild(svgElement);\n    reparentNodes(content, svgElement.firstChild);\n    return template;\n  }\n}\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {isDirective} from './directive.js';\nimport {removeNodes} from './dom.js';\nimport {noChange, nothing, Part} from './part.js';\nimport {RenderOptions} from './render-options.js';\nimport {TemplateInstance} from './template-instance.js';\nimport {TemplateResult} from './template-result.js';\nimport {createMarker} from './template.js';\n\nexport const isPrimitive = (value: any) =>\n    (value === null ||\n     !(typeof value === 'object' || typeof value === 'function'));\n\n/**\n * Sets attribute values for AttributeParts, so that the value is only set once\n * even if there are multiple parts for an attribute.\n */\nexport class AttributeCommitter {\n  element: Element;\n  name: string;\n  strings: string[];\n  parts: AttributePart[];\n  dirty = true;\n\n  constructor(element: Element, name: string, strings: string[]) {\n    this.element = element;\n    this.name = name;\n    this.strings = strings;\n    this.parts = [];\n    for (let i = 0; i < strings.length - 1; i++) {\n      this.parts[i] = this._createPart();\n    }\n  }\n\n  /**\n   * Creates a single part. Override this to create a differnt type of part.\n   */\n  protected _createPart(): AttributePart {\n    return new AttributePart(this);\n  }\n\n  protected _getValue(): any {\n    const strings = this.strings;\n    const l = strings.length - 1;\n    let text = '';\n\n    for (let i = 0; i < l; i++) {\n      text += strings[i];\n      const part = this.parts[i];\n      if (part !== undefined) {\n        const v = part.value;\n        if (v != null &&\n            (Array.isArray(v) || typeof v !== 'string' && v[Symbol.iterator])) {\n          for (const t of v) {\n            text += typeof t === 'string' ? t : String(t);\n          }\n        } else {\n          text += typeof v === 'string' ? v : String(v);\n        }\n      }\n    }\n\n    text += strings[l];\n    return text;\n  }\n\n  commit(): void {\n    if (this.dirty) {\n      this.dirty = false;\n      this.element.setAttribute(this.name, this._getValue());\n    }\n  }\n}\n\nexport class AttributePart implements Part {\n  committer: AttributeCommitter;\n  value: any = undefined;\n\n  constructor(comitter: AttributeCommitter) {\n    this.committer = comitter;\n  }\n\n  setValue(value: any): void {\n    if (value !== noChange && (!isPrimitive(value) || value !== this.value)) {\n      this.value = value;\n      // If the value is a not a directive, dirty the committer so that it'll\n      // call setAttribute. If the value is a directive, it'll dirty the\n      // committer if it calls setValue().\n      if (!isDirective(value)) {\n        this.committer.dirty = true;\n      }\n    }\n  }\n\n  commit() {\n    while (isDirective(this.value)) {\n      const directive = this.value;\n      this.value = noChange;\n      directive(this);\n    }\n    if (this.value === noChange) {\n      return;\n    }\n    this.committer.commit();\n  }\n}\n\nexport class NodePart implements Part {\n  options: RenderOptions;\n  startNode!: Node;\n  endNode!: Node;\n  value: any = undefined;\n  _pendingValue: any = undefined;\n\n  constructor(options: RenderOptions) {\n    this.options = options;\n  }\n\n  /**\n   * Inserts this part into a container.\n   *\n   * This part must be empty, as its contents are not automatically moved.\n   */\n  appendInto(container: Node) {\n    this.startNode = container.appendChild(createMarker());\n    this.endNode = container.appendChild(createMarker());\n  }\n\n  /**\n   * Inserts this part between `ref` and `ref`'s next sibling. Both `ref` and\n   * its next sibling must be static, unchanging nodes such as those that appear\n   * in a literal section of a template.\n   *\n   * This part must be empty, as its contents are not automatically moved.\n   */\n  insertAfterNode(ref: Node) {\n    this.startNode = ref;\n    this.endNode = ref.nextSibling!;\n  }\n\n  /**\n   * Appends this part into a parent part.\n   *\n   * This part must be empty, as its contents are not automatically moved.\n   */\n  appendIntoPart(part: NodePart) {\n    part._insert(this.startNode = createMarker());\n    part._insert(this.endNode = createMarker());\n  }\n\n  /**\n   * Appends this part after `ref`\n   *\n   * This part must be empty, as its contents are not automatically moved.\n   */\n  insertAfterPart(ref: NodePart) {\n    ref._insert(this.startNode = createMarker());\n    this.endNode = ref.endNode;\n    ref.endNode = this.startNode;\n  }\n\n  setValue(value: any): void {\n    this._pendingValue = value;\n  }\n\n  commit() {\n    while (isDirective(this._pendingValue)) {\n      const directive = this._pendingValue;\n      this._pendingValue = noChange;\n      directive(this);\n    }\n    const value = this._pendingValue;\n    if (value === noChange) {\n      return;\n    }\n    if (isPrimitive(value)) {\n      if (value !== this.value) {\n        this._commitText(value);\n      }\n    } else if (value instanceof TemplateResult) {\n      this._commitTemplateResult(value);\n    } else if (value instanceof Node) {\n      this._commitNode(value);\n    } else if (Array.isArray(value) || value[Symbol.iterator]) {\n      this._commitIterable(value);\n    } else if (value === nothing) {\n      this.value = nothing;\n      this.clear();\n    } else {\n      // Fallback, will render the string representation\n      this._commitText(value);\n    }\n  }\n\n  private _insert(node: Node) {\n    this.endNode.parentNode!.insertBefore(node, this.endNode);\n  }\n\n  private _commitNode(value: Node): void {\n    if (this.value === value) {\n      return;\n    }\n    this.clear();\n    this._insert(value);\n    this.value = value;\n  }\n\n  private _commitText(value: string): void {\n    const node = this.startNode.nextSibling!;\n    value = value == null ? '' : value;\n    if (node === this.endNode.previousSibling &&\n        node.nodeType === 3 /* Node.TEXT_NODE */) {\n      // If we only have a single text node between the markers, we can just\n      // set its value, rather than replacing it.\n      // TODO(justinfagnani): Can we just check if this.value is primitive?\n      (node as Text).data = value;\n    } else {\n      this._commitNode(document.createTextNode(\n          typeof value === 'string' ? value : String(value)));\n    }\n    this.value = value;\n  }\n\n  private _commitTemplateResult(value: TemplateResult): void {\n    const template = this.options.templateFactory(value);\n    if (this.value && this.value.template === template) {\n      this.value.update(value.values);\n    } else {\n      // Make sure we propagate the template processor from the TemplateResult\n      // so that we use its syntax extension, etc. The template factory comes\n      // from the render function options so that it can control template\n      // caching and preprocessing.\n      const instance =\n          new TemplateInstance(template, value.processor, this.options);\n      const fragment = instance._clone();\n      instance.update(value.values);\n      this._commitNode(fragment);\n      this.value = instance;\n    }\n  }\n\n  private _commitIterable(value: any): void {\n    // For an Iterable, we create a new InstancePart per item, then set its\n    // value to the item. This is a little bit of overhead for every item in\n    // an Iterable, but it lets us recurse easily and efficiently update Arrays\n    // of TemplateResults that will be commonly returned from expressions like:\n    // array.map((i) => html`${i}`), by reusing existing TemplateInstances.\n\n    // If _value is an array, then the previous render was of an\n    // iterable and _value will contain the NodeParts from the previous\n    // render. If _value is not an array, clear this part and make a new\n    // array for NodeParts.\n    if (!Array.isArray(this.value)) {\n      this.value = [];\n      this.clear();\n    }\n\n    // Lets us keep track of how many items we stamped so we can clear leftover\n    // items from a previous render\n    const itemParts = this.value as NodePart[];\n    let partIndex = 0;\n    let itemPart: NodePart|undefined;\n\n    for (const item of value) {\n      // Try to reuse an existing part\n      itemPart = itemParts[partIndex];\n\n      // If no existing part, create a new one\n      if (itemPart === undefined) {\n        itemPart = new NodePart(this.options);\n        itemParts.push(itemPart);\n        if (partIndex === 0) {\n          itemPart.appendIntoPart(this);\n        } else {\n          itemPart.insertAfterPart(itemParts[partIndex - 1]);\n        }\n      }\n      itemPart.setValue(item);\n      itemPart.commit();\n      partIndex++;\n    }\n\n    if (partIndex < itemParts.length) {\n      // Truncate the parts array so _value reflects the current state\n      itemParts.length = partIndex;\n      this.clear(itemPart && itemPart!.endNode);\n    }\n  }\n\n  clear(startNode: Node = this.startNode) {\n    removeNodes(\n        this.startNode.parentNode!, startNode.nextSibling!, this.endNode);\n  }\n}\n\n/**\n * Implements a boolean attribute, roughly as defined in the HTML\n * specification.\n *\n * If the value is truthy, then the attribute is present with a value of\n * ''. If the value is falsey, the attribute is removed.\n */\nexport class BooleanAttributePart implements Part {\n  element: Element;\n  name: string;\n  strings: string[];\n  value: any = undefined;\n  _pendingValue: any = undefined;\n\n  constructor(element: Element, name: string, strings: string[]) {\n    if (strings.length !== 2 || strings[0] !== '' || strings[1] !== '') {\n      throw new Error(\n          'Boolean attributes can only contain a single expression');\n    }\n    this.element = element;\n    this.name = name;\n    this.strings = strings;\n  }\n\n  setValue(value: any): void {\n    this._pendingValue = value;\n  }\n\n  commit() {\n    while (isDirective(this._pendingValue)) {\n      const directive = this._pendingValue;\n      this._pendingValue = noChange;\n      directive(this);\n    }\n    if (this._pendingValue === noChange) {\n      return;\n    }\n    const value = !!this._pendingValue;\n    if (this.value !== value) {\n      if (value) {\n        this.element.setAttribute(this.name, '');\n      } else {\n        this.element.removeAttribute(this.name);\n      }\n    }\n    this.value = value;\n    this._pendingValue = noChange;\n  }\n}\n\n/**\n * Sets attribute values for PropertyParts, so that the value is only set once\n * even if there are multiple parts for a property.\n *\n * If an expression controls the whole property value, then the value is simply\n * assigned to the property under control. If there are string literals or\n * multiple expressions, then the strings are expressions are interpolated into\n * a string first.\n */\nexport class PropertyCommitter extends AttributeCommitter {\n  single: boolean;\n\n  constructor(element: Element, name: string, strings: string[]) {\n    super(element, name, strings);\n    this.single =\n        (strings.length === 2 && strings[0] === '' && strings[1] === '');\n  }\n\n  protected _createPart(): PropertyPart {\n    return new PropertyPart(this);\n  }\n\n  _getValue() {\n    if (this.single) {\n      return this.parts[0].value;\n    }\n    return super._getValue();\n  }\n\n  commit(): void {\n    if (this.dirty) {\n      this.dirty = false;\n      (this.element as any)[this.name] = this._getValue();\n    }\n  }\n}\n\nexport class PropertyPart extends AttributePart {}\n\n// Detect event listener options support. If the `capture` property is read\n// from the options object, then options are supported. If not, then the thrid\n// argument to add/removeEventListener is interpreted as the boolean capture\n// value so we should only pass the `capture` property.\nlet eventOptionsSupported = false;\n\ntry {\n  const options = {\n    get capture() {\n      eventOptionsSupported = true;\n      return false;\n    }\n  };\n  window.addEventListener('test', options as any, options);\n  window.removeEventListener('test', options as any, options);\n} catch (_e) {\n}\n\nexport class EventPart implements Part {\n  element: Element;\n  eventName: string;\n  eventContext?: EventTarget;\n  value: any = undefined;\n  _options?: AddEventListenerOptions;\n  _pendingValue: any = undefined;\n  _boundHandleEvent: (event: Event) => void;\n\n  constructor(element: Element, eventName: string, eventContext?: EventTarget) {\n    this.element = element;\n    this.eventName = eventName;\n    this.eventContext = eventContext;\n    this._boundHandleEvent = (e) => this.handleEvent(e);\n  }\n\n  setValue(value: any): void {\n    this._pendingValue = value;\n  }\n\n  commit() {\n    while (isDirective(this._pendingValue)) {\n      const directive = this._pendingValue;\n      this._pendingValue = noChange;\n      directive(this);\n    }\n    if (this._pendingValue === noChange) {\n      return;\n    }\n\n    const newListener = this._pendingValue;\n    const oldListener = this.value;\n    const shouldRemoveListener = newListener == null ||\n        oldListener != null &&\n            (newListener.capture !== oldListener.capture ||\n             newListener.once !== oldListener.once ||\n             newListener.passive !== oldListener.passive);\n    const shouldAddListener =\n        newListener != null && (oldListener == null || shouldRemoveListener);\n\n    if (shouldRemoveListener) {\n      this.element.removeEventListener(\n          this.eventName, this._boundHandleEvent, this._options);\n    }\n    if (shouldAddListener) {\n      this._options = getOptions(newListener);\n      this.element.addEventListener(\n          this.eventName, this._boundHandleEvent, this._options);\n    }\n    this.value = newListener;\n    this._pendingValue = noChange;\n  }\n\n  handleEvent(event: Event) {\n    if (typeof this.value === 'function') {\n      this.value.call(this.eventContext || this.element, event);\n    } else {\n      this.value.handleEvent(event);\n    }\n  }\n}\n\n// We copy options because of the inconsistent behavior of browsers when reading\n// the third argument of add/removeEventListener. IE11 doesn't support options\n// at all. Chrome 41 only reads `capture` if the argument is an object.\nconst getOptions = (o: any) => o &&\n    (eventOptionsSupported ?\n         {capture: o.capture, passive: o.passive, once: o.once} :\n         o.capture);\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {Part} from './part.js';\nimport {AttributeCommitter, BooleanAttributePart, EventPart, NodePart, PropertyCommitter} from './parts.js';\nimport {RenderOptions} from './render-options.js';\nimport {TemplateProcessor} from './template-processor.js';\n\n/**\n * Creates Parts when a template is instantiated.\n */\nexport class DefaultTemplateProcessor implements TemplateProcessor {\n  /**\n   * Create parts for an attribute-position binding, given the event, attribute\n   * name, and string literals.\n   *\n   * @param element The element containing the binding\n   * @param name  The attribute name\n   * @param strings The string literals. There are always at least two strings,\n   *   event for fully-controlled bindings with a single expression.\n   */\n  handleAttributeExpressions(\n      element: Element, name: string, strings: string[],\n      options: RenderOptions): Part[] {\n    const prefix = name[0];\n    if (prefix === '.') {\n      const comitter = new PropertyCommitter(element, name.slice(1), strings);\n      return comitter.parts;\n    }\n    if (prefix === '@') {\n      return [new EventPart(element, name.slice(1), options.eventContext)];\n    }\n    if (prefix === '?') {\n      return [new BooleanAttributePart(element, name.slice(1), strings)];\n    }\n    const comitter = new AttributeCommitter(element, name, strings);\n    return comitter.parts;\n  }\n  /**\n   * Create parts for a text-position binding.\n   * @param templateFactory\n   */\n  handleTextExpression(options: RenderOptions) {\n    return new NodePart(options);\n  }\n}\n\nexport const defaultTemplateProcessor = new DefaultTemplateProcessor();\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {TemplateResult} from './template-result.js';\nimport {marker, Template} from './template.js';\n\n/**\n * A function type that creates a Template from a TemplateResult.\n *\n * This is a hook into the template-creation process for rendering that\n * requires some modification of templates before they're used, like ShadyCSS,\n * which must add classes to elements and remove styles.\n *\n * Templates should be cached as aggressively as possible, so that many\n * TemplateResults produced from the same expression only do the work of\n * creating the Template the first time.\n *\n * Templates are usually cached by TemplateResult.strings and\n * TemplateResult.type, but may be cached by other keys if this function\n * modifies the template.\n *\n * Note that currently TemplateFactories must not add, remove, or reorder\n * expressions, because there is no way to describe such a modification\n * to render() so that values are interpolated to the correct place in the\n * template instances.\n */\nexport type TemplateFactory = (result: TemplateResult) => Template;\n\n/**\n * The default TemplateFactory which caches Templates keyed on\n * result.type and result.strings.\n */\nexport function templateFactory(result: TemplateResult) {\n  let templateCache = templateCaches.get(result.type);\n  if (templateCache === undefined) {\n    templateCache = {\n      stringsArray: new WeakMap<TemplateStringsArray, Template>(),\n      keyString: new Map<string, Template>()\n    };\n    templateCaches.set(result.type, templateCache);\n  }\n\n  let template = templateCache.stringsArray.get(result.strings);\n  if (template !== undefined) {\n    return template;\n  }\n\n  // If the TemplateStringsArray is new, generate a key from the strings\n  // This key is shared between all templates with identical content\n  const key = result.strings.join(marker);\n\n  // Check if we already have a Template for this key\n  template = templateCache.keyString.get(key);\n  if (template === undefined) {\n    // If we have not seen this key before, create a new Template\n    template = new Template(result, result.getTemplateElement());\n    // Cache the Template for this key\n    templateCache.keyString.set(key, template);\n  }\n\n  // Cache all future queries for this TemplateStringsArray\n  templateCache.stringsArray.set(result.strings, template);\n  return template;\n}\n\n/**\n * The first argument to JS template tags retain identity across multiple\n * calls to a tag for the same literal, so we can cache work done per literal\n * in a Map.\n *\n * Safari currently has a bug which occasionally breaks this behaviour, so we\n * need to cache the Template at two levels. We first cache the\n * TemplateStringsArray, and if that fails, we cache a key constructed by\n * joining the strings array.\n */\nexport type templateCache = {\n  stringsArray: WeakMap<TemplateStringsArray, Template>;\n  keyString: Map<string, Template>;\n};\n\nexport const templateCaches = new Map<string, templateCache>();\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {removeNodes} from './dom.js';\nimport {NodePart} from './parts.js';\nimport {RenderOptions} from './render-options.js';\nimport {templateFactory} from './template-factory.js';\nimport {TemplateResult} from './template-result.js';\n\nexport const parts = new WeakMap<Node, NodePart>();\n\n/**\n * Renders a template to a container.\n *\n * To update a container with new values, reevaluate the template literal and\n * call `render` with the new result.\n *\n * @param result a TemplateResult created by evaluating a template tag like\n *     `html` or `svg`.\n * @param container A DOM parent to render to. The entire contents are either\n *     replaced, or efficiently updated if the same result type was previous\n *     rendered there.\n * @param options RenderOptions for the entire render tree rendered to this\n *     container. Render options must *not* change between renders to the same\n *     container, as those changes will not effect previously rendered DOM.\n */\nexport const render =\n    (result: TemplateResult,\n     container: Element|DocumentFragment,\n     options?: Partial<RenderOptions>) => {\n      let part = parts.get(container);\n      if (part === undefined) {\n        removeNodes(container, container.firstChild);\n        parts.set(container, part = new NodePart({\n                               templateFactory,\n                               ...options,\n                             }));\n        part.appendInto(container);\n      }\n      part.setValue(result);\n      part.commit();\n    };\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n *\n * Main lit-html module.\n *\n * Main exports:\n *\n * -  [[html]]\n * -  [[svg]]\n * -  [[render]]\n *\n * @module lit-html\n * @preferred\n */\n\n/**\n * Do not remove this comment; it keeps typedoc from misplacing the module\n * docs.\n */\nimport {defaultTemplateProcessor} from './lib/default-template-processor.js';\nimport {SVGTemplateResult, TemplateResult} from './lib/template-result.js';\n\nexport {DefaultTemplateProcessor, defaultTemplateProcessor} from './lib/default-template-processor.js';\nexport {directive, DirectiveFn, isDirective} from './lib/directive.js';\n// TODO(justinfagnani): remove line when we get NodePart moving methods\nexport {removeNodes, reparentNodes} from './lib/dom.js';\nexport {noChange, nothing, Part} from './lib/part.js';\nexport {AttributeCommitter, AttributePart, BooleanAttributePart, EventPart, isPrimitive, NodePart, PropertyCommitter, PropertyPart} from './lib/parts.js';\nexport {RenderOptions} from './lib/render-options.js';\nexport {parts, render} from './lib/render.js';\nexport {templateCaches, templateFactory} from './lib/template-factory.js';\nexport {TemplateInstance} from './lib/template-instance.js';\nexport {TemplateProcessor} from './lib/template-processor.js';\nexport {SVGTemplateResult, TemplateResult} from './lib/template-result.js';\nexport {createMarker, isTemplatePartActive, Template} from './lib/template.js';\n\n/**\n * Interprets a template literal as an HTML template that can efficiently\n * render to and update a container.\n */\nexport const html = (strings: TemplateStringsArray, ...values: any[]) =>\n    new TemplateResult(strings, values, 'html', defaultTemplateProcessor);\n\n/**\n * Interprets a template literal as an SVG template that can efficiently\n * render to and update a container.\n */\nexport const svg = (strings: TemplateStringsArray, ...values: any[]) =>\n    new SVGTemplateResult(strings, values, 'svg', defaultTemplateProcessor);\n","/**\n * @license\n * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\nimport {directive, Part} from '../lit-html.js';\n\nconst previousValues = new WeakMap<Part, unknown>();\n\n/**\n * Prevents re-render of a template function until a single value or an array of\n * values changes.\n *\n * Example:\n *\n * ```js\n * html`\n *   <div>\n *     ${guard([user.id, company.id], () => html`...`)}\n *   </div>\n * ```\n *\n * In this case, the template only renders if either `user.id` or `company.id`\n * changes.\n *\n * guard() is useful with immutable data patterns, by preventing expensive work\n * until data updates.\n *\n * Example:\n *\n * ```js\n * html`\n *   <div>\n *     ${guard([immutableItems], () => immutableItems.map(i => html`${i}`))}\n *   </div>\n * ```\n *\n * In this case, items are mapped over only when the array reference changes.\n *\n * @param value the value to check before re-rendering\n * @param f the template function\n */\nexport const guard =\n    directive((value: unknown, f: () => unknown) => (part: Part): void => {\n      const previousValue = previousValues.get(part);\n      if (Array.isArray(value)) {\n        // Dirty-check arrays by item\n        if (Array.isArray(previousValue) &&\n            previousValue.length === value.length &&\n            value.every((v, i) => v === previousValue[i])) {\n          return;\n        }\n      } else if (\n          previousValue === value &&\n          (value !== undefined || previousValues.has(part))) {\n        // Dirty-check non-arrays by identity\n        return;\n      }\n\n      part.setValue(f());\n      // Copy the value if it's an array so that if it's mutated we don't forget\n      // what the previous values were.\n      previousValues.set(\n          part, Array.isArray(value) ? Array.from(value) : value);\n    });\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\nimport {DirectiveFn} from '../lib/directive.js';\nimport {createMarker, directive, NodePart, Part, removeNodes, reparentNodes} from '../lit-html.js';\n\nexport type KeyFn<T> = (item: T, index: number) => any;\nexport type ItemTemplate<T> = (item: T, index: number) => any;\n\n// Helper functions for manipulating parts\n// TODO(kschaaf): Refactor into Part API?\nconst createAndInsertPart =\n    (containerPart: NodePart, beforePart?: NodePart): NodePart => {\n      const container = containerPart.startNode.parentNode as Node;\n      const beforeNode = beforePart === undefined ? containerPart.endNode :\n                                                    beforePart.startNode;\n      const startNode = container.insertBefore(createMarker(), beforeNode);\n      container.insertBefore(createMarker(), beforeNode);\n      const newPart = new NodePart(containerPart.options);\n      newPart.insertAfterNode(startNode);\n      return newPart;\n    };\n\nconst updatePart = (part: NodePart, value: unknown) => {\n  part.setValue(value);\n  part.commit();\n  return part;\n};\n\nconst insertPartBefore =\n    (containerPart: NodePart, part: NodePart, ref?: NodePart) => {\n      const container = containerPart.startNode.parentNode as Node;\n      const beforeNode = ref ? ref.startNode : containerPart.endNode;\n      const endNode = part.endNode.nextSibling;\n      if (endNode !== beforeNode) {\n        reparentNodes(container, part.startNode, endNode, beforeNode);\n      }\n    };\n\nconst removePart = (part: NodePart) => {\n  removeNodes(\n      part.startNode.parentNode!, part.startNode, part.endNode.nextSibling);\n};\n\n// Helper for generating a map of array item to its index over a subset\n// of an array (used to lazily generate `newKeyToIndexMap` and\n// `oldKeyToIndexMap`)\nconst generateMap = (list: unknown[], start: number, end: number) => {\n  const map = new Map();\n  for (let i = start; i <= end; i++) {\n    map.set(list[i], i);\n  }\n  return map;\n};\n\n// Stores previous ordered list of parts and map of key to index\nconst partListCache = new WeakMap<NodePart, (NodePart | null)[]>();\nconst keyListCache = new WeakMap<NodePart, unknown[]>();\n\n/**\n * A directive that repeats a series of values (usually `TemplateResults`)\n * generated from an iterable, and updates those items efficiently when the\n * iterable changes based on user-provided `keys` associated with each item.\n *\n * Note that if a `keyFn` is provided, strict key-to-DOM mapping is maintained,\n * meaning previous DOM for a given key is moved into the new position if\n * needed, and DOM will never be reused with values for different keys (new DOM\n * will always be created for new keys). This is generally the most efficient\n * way to use `repeat` since it performs minimum unnecessary work for insertions\n * amd removals.\n *\n * IMPORTANT: If providing a `keyFn`, keys *must* be unique for all items in a\n * given call to `repeat`. The behavior when two or more items have the same key\n * is undefined.\n *\n * If no `keyFn` is provided, this directive will perform similar to mapping\n * items to values, and DOM will be reused against potentially different items.\n */\nexport const repeat = directive(\n    <T>(items: Iterable<T>,\n        keyFnOrTemplate: KeyFn<T>|ItemTemplate<T>,\n        template?: ItemTemplate<T>): DirectiveFn => {\n      let keyFn: KeyFn<T>;\n      if (template === undefined) {\n        template = keyFnOrTemplate;\n      } else if (keyFnOrTemplate !== undefined) {\n        keyFn = keyFnOrTemplate as KeyFn<T>;\n      }\n\n      return (containerPart: Part): void => {\n        if (!(containerPart instanceof NodePart)) {\n          throw new Error('repeat can only be used in text bindings');\n        }\n        // Old part & key lists are retrieved from the last update (associated\n        // with the part for this instance of the directive)\n        const oldParts = partListCache.get(containerPart) || [];\n        const oldKeys = keyListCache.get(containerPart) || [];\n\n        // New part list will be built up as we go (either reused from old parts\n        // or created for new keys in this update). This is saved in the above\n        // cache at the end of the update.\n        const newParts: NodePart[] = [];\n\n        // New value list is eagerly generated from items along with a parallel\n        // array indicating its key.\n        const newValues: unknown[] = [];\n        const newKeys: unknown[] = [];\n        let index = 0;\n        for (const item of items) {\n          newKeys[index] = keyFn ? keyFn(item, index) : index;\n          newValues[index] = template !(item, index);\n          index++;\n        }\n\n        // Maps from key to index for current and previous update; these are\n        // generated lazily only when needed as a performance optimization,\n        // since they are only required for multiple non-contiguous changes in\n        // the list, which are less common.\n        let newKeyToIndexMap!: Map<unknown, number>;\n        let oldKeyToIndexMap!: Map<unknown, number>;\n\n        // Head and tail pointers to old parts and new values\n        let oldHead = 0;\n        let oldTail = oldParts.length - 1;\n        let newHead = 0;\n        let newTail = newValues.length - 1;\n\n        // Overview of O(n) reconciliation algorithm (general approach based on\n        // ideas found in ivi, vue, snabbdom, etc.):\n        //\n        // * We start with the list of old parts and new values (and arrays of\n        //   their respective keys), head/tail pointers into each, and we build\n        //   up the new list of parts by updating (and when needed, moving) old\n        //   parts or creating new ones. The initial scenario might look like\n        //   this (for brevity of the diagrams, the numbers in the array reflect\n        //   keys associated with the old parts or new values, although keys and\n        //   parts/values are actually stored in parallel arrays indexed using\n        //   the same head/tail pointers):\n        //\n        //      oldHead v                 v oldTail\n        //   oldKeys:  [0, 1, 2, 3, 4, 5, 6]\n        //   newParts: [ ,  ,  ,  ,  ,  ,  ]\n        //   newKeys:  [0, 2, 1, 4, 3, 7, 6] <- reflects the user's new item\n        //   order\n        //      newHead ^                 ^ newTail\n        //\n        // * Iterate old & new lists from both sides, updating, swapping, or\n        //   removing parts at the head/tail locations until neither head nor\n        //   tail can move.\n        //\n        // * Example below: keys at head pointers match, so update old part 0\n        // in-\n        //   place (no need to move it) and record part 0 in the `newParts`\n        //   list. The last thing we do is advance the `oldHead` and `newHead`\n        //   pointers (will be reflected in the next diagram).\n        //\n        //      oldHead v                 v oldTail\n        //   oldKeys:  [0, 1, 2, 3, 4, 5, 6]\n        //   newParts: [0,  ,  ,  ,  ,  ,  ] <- heads matched: update 0 and\n        //   newKeys:  [0, 2, 1, 4, 3, 7, 6]    advance both oldHead & newHead\n        //      newHead ^                 ^ newTail\n        //\n        // * Example below: head pointers don't match, but tail pointers do, so\n        //   update part 6 in place (no need to move it), and record part 6 in\n        //   the `newParts` list. Last, advance the `oldTail` and `oldHead`\n        //   pointers.\n        //\n        //         oldHead v              v oldTail\n        //   oldKeys:  [0, 1, 2, 3, 4, 5, 6]\n        //   newParts: [0,  ,  ,  ,  ,  , 6] <- tails matched: update 6 and\n        //   newKeys:  [0, 2, 1, 4, 3, 7, 6]    advance both oldTail & newTail\n        //         newHead ^              ^ newTail\n        //\n        // * If neither head nor tail match; next check if one of the old\n        // head/tail\n        //   items was removed. We first need to generate the reverse map of new\n        //   keys to index (`newKeyToIndexMap`), which is done once lazily as a\n        //   performance optimization, since we only hit this case if multiple\n        //   non-contiguous changes were made. Note that for contiguous removal\n        //   anywhere in the list, the head and tails would advance from either\n        //   end and pass each other before we get to this case and removals\n        //   would be handled in the final while loop without needing to\n        //   generate the map.\n        //\n        // * Example below: The key at `oldTail` was removed (no longer in the\n        //   `newKeyToIndexMap`), so remove that part from the DOM and advance\n        //   just the `oldTail` pointer.\n        //\n        //         oldHead v           v oldTail\n        //   oldKeys:  [0, 1, 2, 3, 4, 5, 6]\n        //   newParts: [0,  ,  ,  ,  ,  , 6] <- 5 not in new map; remove 5 and\n        //   newKeys:  [0, 2, 1, 4, 3, 7, 6]    advance oldTail\n        //         newHead ^           ^ newTail\n        //\n        // * Once head and tail cannot move, any mismatches are due to either\n        // new or\n        //   moved items; if a new key is in the previous \"old key to old index\"\n        //   map, move the old part to the new location, otherwise create and\n        //   insert a new part. Note that when moving an old part we null its\n        //   position in the oldParts array if it lies between the head and tail\n        //   so we know to skip it when the pointers get there.\n        //\n        // * Example below: neither head nor tail match, and neither were\n        // removed;\n        //   so find the `newHead` key in the `oldKeyToIndexMap`, and move that\n        //   old part's DOM into the next head position (before\n        //   `oldParts[oldHead]`). Last, null the part in the `oldPart` array\n        //   since it was somewhere in the remaining oldParts still to be\n        //   scanned (between the head and tail pointers) so that we know to\n        //   skip that old part on future iterations.\n        //\n        //         oldHead v        v oldTail\n        //   oldKeys:  [0, 1, -, 3, 4, 5, 6]\n        //   newParts: [0, 2,  ,  ,  ,  , 6] <- stuck; update & move 2 into\n        //   place newKeys:  [0, 2, 1, 4, 3, 7, 6]    and advance newHead\n        //         newHead ^           ^ newTail\n        //\n        // * Note that for moves/insertions like the one above, a part inserted\n        // at\n        //   the head pointer is inserted before the current\n        //   `oldParts[oldHead]`, and a part inserted at the tail pointer is\n        //   inserted before `newParts[newTail+1]`. The seeming asymmetry lies\n        //   in the fact that new parts are moved into place outside in, so to\n        //   the right of the head pointer are old parts, and to the right of\n        //   the tail pointer are new parts.\n        //\n        // * We always restart back from the top of the algorithm, allowing\n        // matching\n        //   and simple updates in place to continue...\n        //\n        // * Example below: the head pointers once again match, so simply update\n        //   part 1 and record it in the `newParts` array.  Last, advance both\n        //   head pointers.\n        //\n        //         oldHead v        v oldTail\n        //   oldKeys:  [0, 1, -, 3, 4, 5, 6]\n        //   newParts: [0, 2, 1,  ,  ,  , 6] <- heads matched; update 1 and\n        //   newKeys:  [0, 2, 1, 4, 3, 7, 6]    advance both oldHead & newHead\n        //            newHead ^        ^ newTail\n        //\n        // * As mentioned above, items that were moved as a result of being\n        // stuck\n        //   (the final else clause in the code below) are marked with null, so\n        //   we always advance old pointers over these so we're comparing the\n        //   next actual old value on either end.\n        //\n        // * Example below: `oldHead` is null (already placed in newParts), so\n        //   advance `oldHead`.\n        //\n        //            oldHead v     v oldTail\n        //   oldKeys:  [0, 1, -, 3, 4, 5, 6] // old head already used; advance\n        //   newParts: [0, 2, 1,  ,  ,  , 6] // oldHead\n        //   newKeys:  [0, 2, 1, 4, 3, 7, 6]\n        //               newHead ^     ^ newTail\n        //\n        // * Note it's not critical to mark old parts as null when they are\n        // moved\n        //   from head to tail or tail to head, since they will be outside the\n        //   pointer range and never visited again.\n        //\n        // * Example below: Here the old tail key matches the new head key, so\n        //   the part at the `oldTail` position and move its DOM to the new\n        //   head position (before `oldParts[oldHead]`). Last, advance `oldTail`\n        //   and `newHead` pointers.\n        //\n        //               oldHead v  v oldTail\n        //   oldKeys:  [0, 1, -, 3, 4, 5, 6]\n        //   newParts: [0, 2, 1, 4,  ,  , 6] <- old tail matches new head:\n        //   update newKeys:  [0, 2, 1, 4, 3, 7, 6]   & move 4, advance oldTail\n        //   & newHead\n        //               newHead ^     ^ newTail\n        //\n        // * Example below: Old and new head keys match, so update the old head\n        //   part in place, and advance the `oldHead` and `newHead` pointers.\n        //\n        //               oldHead v oldTail\n        //   oldKeys:  [0, 1, -, 3, 4, 5, 6]\n        //   newParts: [0, 2, 1, 4, 3,   ,6] <- heads match: update 3 and\n        //   advance newKeys:  [0, 2, 1, 4, 3, 7, 6]    oldHead & newHead\n        //                  newHead ^  ^ newTail\n        //\n        // * Once the new or old pointers move past each other then all we have\n        //   left is additions (if old list exhausted) or removals (if new list\n        //   exhausted). Those are handled in the final while loops at the end.\n        //\n        // * Example below: `oldHead` exceeded `oldTail`, so we're done with the\n        //   main loop.  Create the remaining part and insert it at the new head\n        //   position, and the update is complete.\n        //\n        //                   (oldHead > oldTail)\n        //   oldKeys:  [0, 1, -, 3, 4, 5, 6]\n        //   newParts: [0, 2, 1, 4, 3, 7 ,6] <- create and insert 7\n        //   newKeys:  [0, 2, 1, 4, 3, 7, 6]\n        //                     newHead ^ newTail\n        //\n        // * Note that the order of the if/else clauses is not important to the\n        //   algorithm, as long as the null checks come first (to ensure we're\n        //   always working on valid old parts) and that the final else clause\n        //   comes last (since that's where the expensive moves occur). The\n        //   order of remaining clauses is is just a simple guess at which cases\n        //   will be most common.\n        //\n        // * TODO(kschaaf) Note, we could calculate the longest increasing\n        //   subsequence (LIS) of old items in new position, and only move those\n        //   not in the LIS set. However that costs O(nlogn) time and adds a bit\n        //   more code, and only helps make rare types of mutations require\n        //   fewer moves. The above handles removes, adds, reversal, swaps, and\n        //   single moves of contiguous items in linear time, in the minimum\n        //   number of moves. As the number of multiple moves where LIS might\n        //   help approaches a random shuffle, the LIS optimization becomes less\n        //   helpful, so it seems not worth the code at this point. Could\n        //   reconsider if a compelling case arises.\n\n        while (oldHead <= oldTail && newHead <= newTail) {\n          if (oldParts[oldHead] === null) {\n            // `null` means old part at head has already been used below; skip\n            oldHead++;\n          } else if (oldParts[oldTail] === null) {\n            // `null` means old part at tail has already been used below; skip\n            oldTail--;\n          } else if (oldKeys[oldHead] === newKeys[newHead]) {\n            // Old head matches new head; update in place\n            newParts[newHead] =\n                updatePart(oldParts[oldHead]!, newValues[newHead]);\n            oldHead++;\n            newHead++;\n          } else if (oldKeys[oldTail] === newKeys[newTail]) {\n            // Old tail matches new tail; update in place\n            newParts[newTail] =\n                updatePart(oldParts[oldTail]!, newValues[newTail]);\n            oldTail--;\n            newTail--;\n          } else if (oldKeys[oldHead] === newKeys[newTail]) {\n            // Old head matches new tail; update and move to new tail\n            newParts[newTail] =\n                updatePart(oldParts[oldHead]!, newValues[newTail]);\n            insertPartBefore(\n                containerPart, oldParts[oldHead]!, newParts[newTail + 1]);\n            oldHead++;\n            newTail--;\n          } else if (oldKeys[oldTail] === newKeys[newHead]) {\n            // Old tail matches new head; update and move to new head\n            newParts[newHead] =\n                updatePart(oldParts[oldTail]!, newValues[newHead]);\n            insertPartBefore(\n                containerPart, oldParts[oldTail]!, oldParts[oldHead]!);\n            oldTail--;\n            newHead++;\n          } else {\n            if (newKeyToIndexMap === undefined) {\n              // Lazily generate key-to-index maps, used for removals & moves\n              // below\n              newKeyToIndexMap = generateMap(newKeys, newHead, newTail);\n              oldKeyToIndexMap = generateMap(oldKeys, oldHead, oldTail);\n            }\n            if (!newKeyToIndexMap.has(oldKeys[oldHead])) {\n              // Old head is no longer in new list; remove\n              removePart(oldParts[oldHead]!);\n              oldHead++;\n            } else if (!newKeyToIndexMap.has(oldKeys[oldTail])) {\n              // Old tail is no longer in new list; remove\n              removePart(oldParts[oldTail]!);\n              oldTail--;\n            } else {\n              // Any mismatches at this point are due to additions or moves; see\n              // if we have an old part we can reuse and move into place\n              const oldIndex = oldKeyToIndexMap.get(newKeys[newHead]);\n              const oldPart =\n                  oldIndex !== undefined ? oldParts[oldIndex] : null;\n              if (oldPart === null) {\n                // No old part for this value; create a new one and insert it\n                const newPart =\n                    createAndInsertPart(containerPart, oldParts[oldHead]!);\n                updatePart(newPart, newValues[newHead]);\n                newParts[newHead] = newPart;\n              } else {\n                // Reuse old part\n                newParts[newHead] = updatePart(oldPart, newValues[newHead]);\n                insertPartBefore(containerPart, oldPart, oldParts[oldHead]!);\n                // This marks the old part as having been used, so that it will\n                // be skipped in the first two checks above\n                oldParts[oldIndex as number] = null;\n              }\n              newHead++;\n            }\n          }\n        }\n        // Add parts for any remaining new values\n        while (newHead <= newTail) {\n          // For all remaining additions, we insert before last new tail,\n          // since old pointers are no longer valid\n          const newPart =\n              createAndInsertPart(containerPart, newParts[newTail + 1]!);\n          updatePart(newPart, newValues[newHead]);\n          newParts[newHead++] = newPart;\n        }\n        // Remove any remaining unused old parts\n        while (oldHead <= oldTail) {\n          const oldPart = oldParts[oldHead++];\n          if (oldPart !== null) {\n            removePart(oldPart);\n          }\n        }\n        // Save order of new parts for next round\n        partListCache.set(containerPart, newParts);\n        keyListCache.set(containerPart, newKeys);\n      };\n    });\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\nimport {isPrimitive} from '../lib/parts.js';\nimport {directive, NodePart, Part} from '../lit-html.js';\n\ninterface PreviousValue {\n  value: any;\n  fragment: DocumentFragment;\n}\n\n// For each part, remember the value that was last rendered to the part by the\n// unsafeHTML directive, and the DocumentFragment that was last set as a value.\n// The DocumentFragment is used as a unique key to check if the last value\n// rendered to the part was with unsafeHTML. If not, we'll always re-render the\n// value passed to unsafeHTML.\nconst previousValues = new WeakMap<NodePart, PreviousValue>();\n\n/**\n * Renders the result as HTML, rather than text.\n *\n * Note, this is unsafe to use with any user-provided input that hasn't been\n * sanitized or escaped, as it may lead to cross-site-scripting\n * vulnerabilities.\n */\nexport const unsafeHTML = directive((value: any) => (part: Part): void => {\n  if (!(part instanceof NodePart)) {\n    throw new Error('unsafeHTML can only be used in text bindings');\n  }\n\n  const previousValue = previousValues.get(part);\n\n  if (previousValue !== undefined && isPrimitive(value) &&\n      value === previousValue.value && part.value === previousValue.fragment) {\n    return;\n  }\n\n  const template = document.createElement('template');\n  template.innerHTML = value;\n  const fragment = document.importNode(template.content, true);\n  part.setValue(fragment);\n  previousValues.set(part, {value, fragment});\n});\n","\nimport { createHoc } from './hoc/createHoc';\n\nimport { html as htmlFn, render } from 'lit-html';\nimport { guard } from 'lit-html/directives/guard.js';\nimport { repeat} from 'lit-html/directives/repeat.js';\nimport { unsafeHTML} from 'lit-html/directives/unsafe-html.js';\n\nconst html = htmlFn;\nhtml.guard = guard;\nhtml.repeat = repeat;\nhtml.unsafeHTML = unsafeHTML;\n\nexport {\n  html,\n  render,\n  createHoc,\n};\n\n","\nimport { html, createHoc } from './ui';\n\nexport function createClient(args) {\n\n  const {\n    Store,\n    lib,\n    components,\n    fragments,\n  } = args;\n\n  // Initialization\n  const client = {\n    html,\n    ui: {},\n  };\n\n  // Store is necessary to create the HOC\n  client.hoc = createHoc(Store, client);\n\n  // Attach lib for convenience\n  client.lib = lib;\n\n  // Components will be available to fragments and pages\n  client.ui.components = Object.keys(components).reduce((acum, key) => {\n    return {\n      ...acum,\n      [key]: components[key](client),\n    };\n  }, {});\n\n  // Fragments will be available to pages\n  client.ui.fragments = Object.keys(fragments).reduce((acum, key) => {\n    return {\n      ...acum,\n      [key]: fragments[key](client),\n    };\n  }, {});\n\n  return client;\n\n}\n\n","\nimport createStore from './store';\nimport { createClient } from './createClient';\nimport { render } from './ui';\nimport globals from './globals';\n\nconst isProduction = process.env.NODE_ENV === 'production';\n\nexport const client = {\n\n  init: args => {\n\n    const {\n      store,\n      lib,\n      rootComponent,\n      components = {},\n      fragments = {},\n    } = args;\n\n    const Store = createStore(store, render);\n    if (!isProduction) window.Store = Store;\n\n    const _client = createClient({\n      Store,\n      lib,\n      components,\n      fragments,\n    });\n\n    window.onload = () => {\n      Store.methods.startApp({\n        appData: window[globals.WINDOW_APP_DATA],\n        rootComponent: rootComponent(_client),\n      });\n    };\n\n    return _client;\n\n  },\n\n};\n\n","\r\rexport default () => args => {\r\r  const { page, action } = args;\r\r  return {\r    steps: [\r\r      () => ({\r        domain: '_Store_',\r        method: 'set',\r        args: {\r          currentPage: page,\r        },\r        sideEffect: () => {\r          if (action === 'replace') window.history.replaceState(null, null, page);\r          if (action === 'push') window.history.pushState(null, null, page);\r          if (action === 'back') window.history.back();\r        },\r      }),\r    ],\r  };\r\r};\r\r","\r\r\rexport { default as changeRoute } from './changeRoute';\r","\rimport * as actions from './actions';\r\rexport default {\r\r  actions,\r\r  observables: {\r\r    // Domain properties\r    user_id: '',\r    language: 'en',\r\r    // menu\r    'menu.position': -1, // -1: left, 1: right,\r    'menu.level': 0, // 0: default level, 1: first level (child), ...\r\r    // pages\r    currentPage: 'app', // dash, app\r\r    // dash\r    'dash.submenu': '', // settings, ...\r\r  },\r\r};\r\r\r\r","\r\rexport const Input = client => {\r\r  return client.hoc({\r\r    styles: {\r      input: `\r        font-size: 18px;\r        border: none;\r        outline: none;\r        padding: 20px;\r        background: hsl(0, 0%, 98%);\r        border-radius: 5px;\r        margin-bottom: 30px;\r      `,\r    },\r\r    actions(props, /* store */) {\r      return {\r        onKeyDown: e => {\r          // Tab pressed\r          if (e.keyCode === 9) {\r            e.preventDefault();\r            props.onClickRight();\r          }\r        },\r      };\r    },\r\r    render({ props, styles, actions }) {\r\r      const { type, placeholder, value, onInput } = props;\r\r      return client.html`\r        <input\r          type=${type}\r          placeholder=${placeholder}\r          value=${value}\r          style=${styles.input}\r          @input=${onInput}\r          @keydown=${actions.onKeyDown}\r        />\r      `;\r\r    }\r\r  });\r\r};\r","\rexport { Input } from './Input';\r\r\r","\n\nexport const Menu = client => {\n\n  const size = 28;\n\n  return client.hoc({\n\n    state(props, store) {\n      return {\n        position: store.get('menu.position'),\n        level: store.get('menu.level'),\n      };\n    },\n\n    actions(props, store) {\n      return {\n        onClick: () => {\n          const level = store.get('menu.level');\n          const position = store.get('menu.position');\n          if (level === 0) {\n            store.set({\n              'menu.position': -position,\n              currentPage: position === 1 ? 'app' : 'dash',\n            });\n          } else {\n            store.set({\n              'menu.level': level - 1,\n              'dash.submenu': '',\n            });\n          }\n        },\n      };\n    },\n\n    classes: {\n      wrapper: `\n        position: relative;\n        width: ${size}px;\n        height: ${size}px;\n        display: flex;\n        flex-flow: column;\n        justify-content: center;\n      `,\n      line: `\n        position: absolute;\n        width: 100%;\n        height: 20%;\n        transform: scale(1, 1);\n        background: hsla(0, 0%, 50%, 1);\n        border-radius: ${size}px;\n        transition: all .6s ease;\n        transform-origin: 10% 50%;\n      `,\n    },\n\n    styles: {\n      handle: (position, level) => `\n        position: absolute;\n        width: 58%;\n        height: 58%;\n        background: hsl(0, 0%, 98%);\n        border-radius: 50%;\n        z-index: 10;\n        transform:\n          scale(${level > 0 ? 0 : 1.1})\n          translate3d(${position === -1 ? -20 : 80}%, 0, 0);\n        transition: all .35s ease;\n        box-shadow: inset 0px 0px 6px hsla(0, 0%, 0%, 0.6);\n      `,\n      topLine: level => `\n        transform:\n          rotateZ(${level > 0 ? -44 : 0}deg)\n          scale(${level > 0 ? 0.7 : 1}, 1);\n      `,\n      bottomLine: level => `\n        transform:\n          rotateZ(${level > 0 ? 44 : 0}deg)\n          scale(${level > 0 ? 0.7 : 1}, 1);\n      `,\n    },\n\n    render({ actions, state, classes, styles }) {\n\n      const { position, level } = state;\n\n      return client.html`\n        <div class=${classes.wrapper} @click=${actions.onClick}>\n          <div style=${styles.handle(position, level)}></div>\n          <div class=${classes.line} style=${styles.topLine(level)}></div>\n          <div class=${classes.line} style=${styles.bottomLine(level)}></div>\n        </div>\n      `;\n    }\n\n  });\n\n};\n","\rexport { Menu } from './Menu';\r\r","\r\rexport default client => {\r\r  return client.hoc({\r\r    state(props, store) {\r      return {\r        currentPage: store.get('currentPage'),\r      };\r    },\r\r    styles: {\r      app: isVisible => `\r        display: flex;\r        position: absolute;\r        justify-content: center;\r        align-items: center;\r        min-width: 100%;\r        height: 100%;\r        transition: all .6s ease-out;\r        overflow: hidden;\r        background: hsl(240, 39%, 92%);\r        opacity: ${isVisible ? 1 : 0};\r        pointer-events: ${isVisible ? 'auto' : 'none'};\r      `,\r    },\r\r    render({ styles, state }) {\r\r      const { currentPage } = state;\r\r      return client.html`\r        <div id='app' style=${styles.app(currentPage === 'app')}>\r          I am the App!\r        </div>\r      `;\r\r    }\r\r  });\r};\r","\rexport default client => {\r\r  return client.hoc({\r\r    render() {\r\r      return client.html`\r        <div id='dash-settings'>\r          Settings\r        </div>\r      `;\r\r    }\r\r  });\r};\r","\rexport default client => {\r\r  return client.hoc({\r\r    render() {\r\r      return client.html`\r        <div id='dash-help'>\r          Help\r        </div>\r      `;\r\r    }\r\r  });\r};\r","\rexport default client => {\r\r  return client.hoc({\r\r    render() {\r\r      return client.html`\r        <div id='dash-legal'>\r          Legal\r        </div>\r      `;\r\r    }\r\r  });\r};\r","\rexport default client => {\r\r  return client.hoc({\r\r    render() {\r\r      return client.html`\r        <div id='dash-profile'>\r          Profile\r        </div>\r      `;\r\r    }\r\r  });\r};\r","\r\rexport default client => {\r\r  return client.hoc({\r\r    state(props, store) {\r      return {\r        currentPage: store.get('currentPage'),\r        submenu: store.get('dash.submenu'),\r        level: store.get('menu.level'),\r      };\r    },\r\r    actions(props, store) {\r      return {\r        onClick: key => {\r          const level = store.get('menu.level');\r          store.set({\r            'dash.submenu': key.toLowerCase(),\r            'menu.level': level + 1,\r          });\r        },\r      };\r    },\r\r    sections: {\r      Settings: require('./<Settings>/Settings.js').default,\r      Help: require('./<Help>/Help.js').default,\r      Legal: require('./<Legal>/Legal.js').default,\r      Profile: require('./<Profile>/Profile.js').default,\r    },\r\r    classes: {\r      submenus: `\r        display: flex;\r        flex-flow: column;\r        padding: 20px;\r      `,\r      submenu: `\r        padding: 10px;\r        cursor: pointer;\r      `,\r    },\r\r    styles: {\r      dash: isVisible => `\r        display: flex;\r        position: absolute;\r        justify-content: center;\r        align-items: center;\r        min-width: 100%;\r        height: 100%;\r        transition: all .6s ease-out;\r        overflow: hidden;\r        opacity: ${isVisible ? 1 : 0};\r        pointer-events: ${isVisible ? 'auto' : 'none'};\r      `,\r      screen: isVisible => `\r        position: absolute;\r        display: flex;\r        flex-flow: column;\r        justify-content: center;\r        align-items: center;\r        min-width: 100%;\r        height: 100%;\r        transition: all .5s ease-out;\r        background: white;\r        transform: translate3d(${isVisible ? 0 : 100}%, 0, 0);\r        pointer-events: ${isVisible ? 'auto' : 'none'};\r      `,\r    },\r\r    render({ styles, state, classes, actions, sections }) {\r\r      const { currentPage, submenu, level } = state;\r\r      return client.html`\r        <div id='dash' style=${styles.dash(currentPage === 'dash')}>\r          ${Object.keys(sections).map(key => {\r            const isVisible = level === 1 && submenu === key.toLowerCase();\r            return client.html`\r              <div style=${styles.screen(isVisible)}>\r                ${sections[key]()}\r              </div>\r            `;\r          })}\r          <div class=${classes.submenus}>\r            ${Object.keys(sections).map(key => client.html`\r              <div class=${classes.submenu} @click=${() => actions.onClick(key)}>\r                ${key}\r              </div>\r            `)}\r            <div class=${classes.submenu}>\r              <a href='/signin'>Logout</a>\r            </div>\r          </div>\r        </div>\r      `;\r\r    }\r\r  });\r};\r","\rexport default client => {\r\r  const { Menu } = client.ui.fragments;\r\r  return client.hoc({\r\r    classes: {\r      wrapper: `\r        position: relative;\r        height: 100vh;\r        width: 100%;\r      `,\r      menu: `\r        position: absolute;\r        top: 12px;\r        left: 12px;\r        cursor: pointer;\r        z-index: 10;\r        user-select: none;\r      `,\r      pages: `\r        position: absolute;\r        top: 0; left: 0; right: 0; bottom: 0;\r        overflow: hidden;\r      `,\r    },\r\r    sections: {\r      App: require('./pages/<App>/App.js').default,\r      Dashboard: require('./pages/<Dashboard>/Dashboard.js').default,\r    },\r\r    render({ classes, sections }) {\r\r      return client.html`\r        <div id='pages-wrapper' class=${classes.wrapper}>\r          <header id='menu' class=${classes.menu}>\r            ${Menu()}\r          </header>\r          <main id='pages' class=${classes.pages}>\r            ${sections.App()}\r            ${sections.Dashboard()}\r          </main>\r        </div>\r      `;\r\r    }\r\r  });\r};\r","\nimport store from '/client/store';\n// import * as lib from '/client/lib';\nimport * as components from '/client/ui/components';\nimport * as fragments from '/client/ui/fragments';\nimport rootComponent from '/client/ui/Root';\n\nexport default {\n\n  client: {\n    store,\n    // lib,\n    rootComponent,\n    components,\n    fragments,\n  },\n\n  env: {\n\n    development: {\n      httpPort: 4201,\n      socketPort: 4202,\n      baseUrl: 'localhost',\n      baseFolder: '',\n      useServiceWorker: false,\n      useManifest: true,\n    },\n\n    production: {\n      httpPort: 4201,\n      socketPort: 4202,\n      baseUrl: 'museeker.io',\n      baseFolder: 'base-app',\n      useServiceWorker: true,\n      useManifest: true,\n    },\n\n  },\n\n};\n","\nimport { client } from '@jmaguirrei/client';\nimport config from '../config.js';\n\nconsole.log(\"window.jmaguirrei\", window.jmaguirrei);\nconsole.log(process.env.NODE_ENV);\nconsole.log(\"client\", client);\n\nexport default client.init(config.client);\n"]}